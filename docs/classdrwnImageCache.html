<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Darwin: drwnImageCache Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="drwn.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Darwin
   &#160;<span id="projectnumber">1.10(beta)</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classdrwnImageCache-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">drwnImageCache Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Caches images in memory up to a maximum number of images or memory limit.  
 <a href="classdrwnImageCache.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a54973e39412ab526989bdca3705d7b89"><td class="memItemLeft" align="right" valign="top"><a id="a54973e39412ab526989bdca3705d7b89"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageCache.html#a54973e39412ab526989bdca3705d7b89">drwnImageCache</a> (bool bGreyImages=<a class="el" href="classdrwnImageCache.html#a1d9ddd3115901611ce03ccc9c23908b9">GREY_IMAGES</a>, bool bBigMemory=<a class="el" href="classdrwnImageCache.html#a643a6d6e73bdc8f95457a87dc597bd4e">BIG_MEMORY</a>)</td></tr>
<tr class="memdesc:a54973e39412ab526989bdca3705d7b89"><td class="mdescLeft">&#160;</td><td class="mdescRight">constructor <br /></td></tr>
<tr class="separator:a54973e39412ab526989bdca3705d7b89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac3b8f8abc1e553838b6b2f8fde12b52"><td class="memItemLeft" align="right" valign="top"><a id="aac3b8f8abc1e553838b6b2f8fde12b52"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageCache.html#aac3b8f8abc1e553838b6b2f8fde12b52">drwnImageCache</a> (const vector&lt; string &gt; &amp;filenames, bool bGreyImages=<a class="el" href="classdrwnImageCache.html#a1d9ddd3115901611ce03ccc9c23908b9">GREY_IMAGES</a>, bool bBigMemory=<a class="el" href="classdrwnImageCache.html#a643a6d6e73bdc8f95457a87dc597bd4e">BIG_MEMORY</a>)</td></tr>
<tr class="memdesc:aac3b8f8abc1e553838b6b2f8fde12b52"><td class="mdescLeft">&#160;</td><td class="mdescRight">constructor with filename initialization <br /></td></tr>
<tr class="separator:aac3b8f8abc1e553838b6b2f8fde12b52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf9a313fa672d597dd34980558e84c07"><td class="memItemLeft" align="right" valign="top"><a id="adf9a313fa672d597dd34980558e84c07"></a>
virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageCache.html#adf9a313fa672d597dd34980558e84c07">~drwnImageCache</a> ()</td></tr>
<tr class="memdesc:adf9a313fa672d597dd34980558e84c07"><td class="mdescLeft">&#160;</td><td class="mdescRight">destructor <br /></td></tr>
<tr class="separator:adf9a313fa672d597dd34980558e84c07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5050328071395cc967f1622f044592e7"><td class="memItemLeft" align="right" valign="top"><a id="a5050328071395cc967f1622f044592e7"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageCache.html#a5050328071395cc967f1622f044592e7">initialize</a> (const vector&lt; string &gt; &amp;filenames)</td></tr>
<tr class="memdesc:a5050328071395cc967f1622f044592e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">initializes the cache with a list of filenames (cache must be clear) <br /></td></tr>
<tr class="separator:a5050328071395cc967f1622f044592e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12a4e6626a0afb9df8c7a57b4762d4fe"><td class="memItemLeft" align="right" valign="top"><a id="a12a4e6626a0afb9df8c7a57b4762d4fe"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageCache.html#a12a4e6626a0afb9df8c7a57b4762d4fe">append</a> (const string &amp;<a class="el" href="classdrwnImageCache.html#aad45acd6fe0d5b784cbd4be6ad372330">filename</a>)</td></tr>
<tr class="memdesc:a12a4e6626a0afb9df8c7a57b4762d4fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">adds a filename to the list of filenames managed by the cache <br /></td></tr>
<tr class="separator:a12a4e6626a0afb9df8c7a57b4762d4fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abefed07ed068d1613e4189e9175636e4"><td class="memItemLeft" align="right" valign="top"><a id="abefed07ed068d1613e4189e9175636e4"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageCache.html#abefed07ed068d1613e4189e9175636e4">clear</a> ()</td></tr>
<tr class="memdesc:abefed07ed068d1613e4189e9175636e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear all images from the cache (cannot be called if some images are still locked). Does nothing if in big memory mode. <br /></td></tr>
<tr class="separator:abefed07ed068d1613e4189e9175636e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a392f3636d3cb6dea6daa4b7242163cc2"><td class="memItemLeft" align="right" valign="top"><a id="a392f3636d3cb6dea6daa4b7242163cc2"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageCache.html#a392f3636d3cb6dea6daa4b7242163cc2">empty</a> () const</td></tr>
<tr class="memdesc:a392f3636d3cb6dea6daa4b7242163cc2"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns true if the cache is empty (but may still be initialized with filenames) <br /></td></tr>
<tr class="separator:a392f3636d3cb6dea6daa4b7242163cc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2df68af38c40ef109467ef04a6daa980"><td class="memItemLeft" align="right" valign="top"><a id="a2df68af38c40ef109467ef04a6daa980"></a>
size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageCache.html#a2df68af38c40ef109467ef04a6daa980">size</a> () const</td></tr>
<tr class="memdesc:a2df68af38c40ef109467ef04a6daa980"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns number of images stored in the cache <br /></td></tr>
<tr class="separator:a2df68af38c40ef109467ef04a6daa980"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3ca6bbedc906f822b9a6279e91a8f25"><td class="memItemLeft" align="right" valign="top"><a id="ae3ca6bbedc906f822b9a6279e91a8f25"></a>
size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageCache.html#ae3ca6bbedc906f822b9a6279e91a8f25">numLocked</a> () const</td></tr>
<tr class="memdesc:ae3ca6bbedc906f822b9a6279e91a8f25"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns number of locked images in the cache <br /></td></tr>
<tr class="separator:ae3ca6bbedc906f822b9a6279e91a8f25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36b8bd36372980eaa406f0c75b0233fa"><td class="memItemLeft" align="right" valign="top"><a id="a36b8bd36372980eaa406f0c75b0233fa"></a>
size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageCache.html#a36b8bd36372980eaa406f0c75b0233fa">memory</a> () const</td></tr>
<tr class="memdesc:a36b8bd36372980eaa406f0c75b0233fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns memory used by in-memory images <br /></td></tr>
<tr class="separator:a36b8bd36372980eaa406f0c75b0233fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad45acd6fe0d5b784cbd4be6ad372330"><td class="memItemLeft" align="right" valign="top"><a id="aad45acd6fe0d5b784cbd4be6ad372330"></a>
const string &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageCache.html#aad45acd6fe0d5b784cbd4be6ad372330">filename</a> (unsigned indx) const</td></tr>
<tr class="memdesc:aad45acd6fe0d5b784cbd4be6ad372330"><td class="mdescLeft">&#160;</td><td class="mdescRight">return the filename for image <code>indx</code> <br /></td></tr>
<tr class="separator:aad45acd6fe0d5b784cbd4be6ad372330"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4db3725655f67deac637a7c4773782dd"><td class="memItemLeft" align="right" valign="top"><a id="a4db3725655f67deac637a7c4773782dd"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageCache.html#a4db3725655f67deac637a7c4773782dd">index</a> (const string &amp;<a class="el" href="classdrwnImageCache.html#aad45acd6fe0d5b784cbd4be6ad372330">filename</a>) const</td></tr>
<tr class="memdesc:a4db3725655f67deac637a7c4773782dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns the index for filename (slow) <br /></td></tr>
<tr class="separator:a4db3725655f67deac637a7c4773782dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50033c8cd93a874dbc12f3c9f17a09ce"><td class="memItemLeft" align="right" valign="top"><a id="a50033c8cd93a874dbc12f3c9f17a09ce"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageCache.html#a50033c8cd93a874dbc12f3c9f17a09ce">lock</a> (unsigned indx)</td></tr>
<tr class="memdesc:a50033c8cd93a874dbc12f3c9f17a09ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">lock an image for use (loads if not already in the cache) <br /></td></tr>
<tr class="separator:a50033c8cd93a874dbc12f3c9f17a09ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5e71a15ac6c9205d4fb6f05a5dd9483"><td class="memItemLeft" align="right" valign="top"><a id="ad5e71a15ac6c9205d4fb6f05a5dd9483"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageCache.html#ad5e71a15ac6c9205d4fb6f05a5dd9483">lock</a> (const string &amp;<a class="el" href="classdrwnImageCache.html#aad45acd6fe0d5b784cbd4be6ad372330">filename</a>)</td></tr>
<tr class="memdesc:ad5e71a15ac6c9205d4fb6f05a5dd9483"><td class="mdescLeft">&#160;</td><td class="mdescRight">lock an image for use (loads if not already in the cache) <br /></td></tr>
<tr class="separator:ad5e71a15ac6c9205d4fb6f05a5dd9483"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3442a103ca3be97a79f8630b744f835"><td class="memItemLeft" align="right" valign="top"><a id="aa3442a103ca3be97a79f8630b744f835"></a>
const cv::Mat &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageCache.html#aa3442a103ca3be97a79f8630b744f835">get</a> (unsigned indx) const</td></tr>
<tr class="memdesc:aa3442a103ca3be97a79f8630b744f835"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns an image (which must first be locked) <br /></td></tr>
<tr class="separator:aa3442a103ca3be97a79f8630b744f835"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9909b8c68414f7d24132bbe76caf6afe"><td class="memItemLeft" align="right" valign="top"><a id="a9909b8c68414f7d24132bbe76caf6afe"></a>
const cv::Mat &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageCache.html#a9909b8c68414f7d24132bbe76caf6afe">get</a> (const string &amp;<a class="el" href="classdrwnImageCache.html#aad45acd6fe0d5b784cbd4be6ad372330">filename</a>) const</td></tr>
<tr class="memdesc:a9909b8c68414f7d24132bbe76caf6afe"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns an image (which must first be locked) <br /></td></tr>
<tr class="separator:a9909b8c68414f7d24132bbe76caf6afe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae19a890a91cf3ce67a7e4c35e7ac5dcf"><td class="memItemLeft" align="right" valign="top"><a id="ae19a890a91cf3ce67a7e4c35e7ac5dcf"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageCache.html#ae19a890a91cf3ce67a7e4c35e7ac5dcf">unlock</a> (unsigned indx)</td></tr>
<tr class="memdesc:ae19a890a91cf3ce67a7e4c35e7ac5dcf"><td class="mdescLeft">&#160;</td><td class="mdescRight">marks an image as free <br /></td></tr>
<tr class="separator:ae19a890a91cf3ce67a7e4c35e7ac5dcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f28c57a17c90116a49ea34932554abb"><td class="memItemLeft" align="right" valign="top"><a id="a8f28c57a17c90116a49ea34932554abb"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageCache.html#a8f28c57a17c90116a49ea34932554abb">unlock</a> (const string &amp;<a class="el" href="classdrwnImageCache.html#aad45acd6fe0d5b784cbd4be6ad372330">filename</a>)</td></tr>
<tr class="memdesc:a8f28c57a17c90116a49ea34932554abb"><td class="mdescLeft">&#160;</td><td class="mdescRight">marks an image as free <br /></td></tr>
<tr class="separator:a8f28c57a17c90116a49ea34932554abb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae153994546f27769afed940019cc0b56"><td class="memItemLeft" align="right" valign="top"><a id="ae153994546f27769afed940019cc0b56"></a>
cv::Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageCache.html#ae153994546f27769afed940019cc0b56">copy</a> (unsigned indx)</td></tr>
<tr class="memdesc:ae153994546f27769afed940019cc0b56"><td class="mdescLeft">&#160;</td><td class="mdescRight">copies an image without locking it (caller must free the image) <br /></td></tr>
<tr class="separator:ae153994546f27769afed940019cc0b56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b9be5664462622257df6100bfa7ecf0"><td class="memItemLeft" align="right" valign="top"><a id="a4b9be5664462622257df6100bfa7ecf0"></a>
cv::Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageCache.html#a4b9be5664462622257df6100bfa7ecf0">copy</a> (const string &amp;<a class="el" href="classdrwnImageCache.html#aad45acd6fe0d5b784cbd4be6ad372330">filename</a>)</td></tr>
<tr class="memdesc:a4b9be5664462622257df6100bfa7ecf0"><td class="mdescLeft">&#160;</td><td class="mdescRight">copies an image without locking it (caller must free the image) <br /></td></tr>
<tr class="separator:a4b9be5664462622257df6100bfa7ecf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a6df0fd21166d783436fcc3ad784d8835"><td class="memItemLeft" align="right" valign="top"><a id="a6df0fd21166d783436fcc3ad784d8835"></a>
static size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageCache.html#a6df0fd21166d783436fcc3ad784d8835">MAX_IMAGES</a> = 10000</td></tr>
<tr class="memdesc:a6df0fd21166d783436fcc3ad784d8835"><td class="mdescLeft">&#160;</td><td class="mdescRight">maximum number of images in memory at any one time <br /></td></tr>
<tr class="separator:a6df0fd21166d783436fcc3ad784d8835"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96e3ea51ed693f210a608d775105863f"><td class="memItemLeft" align="right" valign="top"><a id="a96e3ea51ed693f210a608d775105863f"></a>
static size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageCache.html#a96e3ea51ed693f210a608d775105863f">MAX_MEMORY</a> = 500000000</td></tr>
<tr class="memdesc:a96e3ea51ed693f210a608d775105863f"><td class="mdescLeft">&#160;</td><td class="mdescRight">maximum number of bytes used at any one time <br /></td></tr>
<tr class="separator:a96e3ea51ed693f210a608d775105863f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d9ddd3115901611ce03ccc9c23908b9"><td class="memItemLeft" align="right" valign="top"><a id="a1d9ddd3115901611ce03ccc9c23908b9"></a>
static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageCache.html#a1d9ddd3115901611ce03ccc9c23908b9">GREY_IMAGES</a> = false</td></tr>
<tr class="memdesc:a1d9ddd3115901611ce03ccc9c23908b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">default setting for caching images in greyscale <br /></td></tr>
<tr class="separator:a1d9ddd3115901611ce03ccc9c23908b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a643a6d6e73bdc8f95457a87dc597bd4e"><td class="memItemLeft" align="right" valign="top"><a id="a643a6d6e73bdc8f95457a87dc597bd4e"></a>
static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageCache.html#a643a6d6e73bdc8f95457a87dc597bd4e">BIG_MEMORY</a> = false</td></tr>
<tr class="memdesc:a643a6d6e73bdc8f95457a87dc597bd4e"><td class="mdescLeft">&#160;</td><td class="mdescRight">default setting for big memory mode <br /></td></tr>
<tr class="separator:a643a6d6e73bdc8f95457a87dc597bd4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a6441f3c875df7126d3e51d7b55172698"><td class="memItemLeft" align="right" valign="top"><a id="a6441f3c875df7126d3e51d7b55172698"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageCache.html#a6441f3c875df7126d3e51d7b55172698">enforceLimits</a> ()</td></tr>
<tr class="memdesc:a6441f3c875df7126d3e51d7b55172698"><td class="mdescLeft">&#160;</td><td class="mdescRight">checks memory and count limits and frees images if exceeded <br /></td></tr>
<tr class="separator:a6441f3c875df7126d3e51d7b55172698"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a862cc0d8869704c64a82a8fa11e974f6"><td class="memItemLeft" align="right" valign="top"><a id="a862cc0d8869704c64a82a8fa11e974f6"></a>
virtual cv::Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageCache.html#a862cc0d8869704c64a82a8fa11e974f6">load</a> (const string &amp;<a class="el" href="classdrwnImageCache.html#aad45acd6fe0d5b784cbd4be6ad372330">filename</a>) const</td></tr>
<tr class="memdesc:a862cc0d8869704c64a82a8fa11e974f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">loads an image (can be overrided to perform some pre-processing) <br /></td></tr>
<tr class="separator:a862cc0d8869704c64a82a8fa11e974f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a2d067086a5d5bde8df9f33c8a21c162c"><td class="memItemLeft" align="right" valign="top"><a id="a2d067086a5d5bde8df9f33c8a21c162c"></a>
vector&lt; string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageCache.html#a2d067086a5d5bde8df9f33c8a21c162c">_filenames</a></td></tr>
<tr class="memdesc:a2d067086a5d5bde8df9f33c8a21c162c"><td class="mdescLeft">&#160;</td><td class="mdescRight">image filenames <br /></td></tr>
<tr class="separator:a2d067086a5d5bde8df9f33c8a21c162c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae453447dad0b1b534266d0c897c6eaf0"><td class="memItemLeft" align="right" valign="top"><a id="ae453447dad0b1b534266d0c897c6eaf0"></a>
vector&lt; cv::Mat &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageCache.html#ae453447dad0b1b534266d0c897c6eaf0">_images</a></td></tr>
<tr class="memdesc:ae453447dad0b1b534266d0c897c6eaf0"><td class="mdescLeft">&#160;</td><td class="mdescRight">loaded images <br /></td></tr>
<tr class="separator:ae453447dad0b1b534266d0c897c6eaf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeaa14f23f4a7c31725f2dc760e9989cc"><td class="memItemLeft" align="right" valign="top"><a id="aeaa14f23f4a7c31725f2dc760e9989cc"></a>
vector&lt; list&lt; unsigned &gt;::iterator &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageCache.html#aeaa14f23f4a7c31725f2dc760e9989cc">_free_list_map</a></td></tr>
<tr class="memdesc:aeaa14f23f4a7c31725f2dc760e9989cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">ref to location in _free_list <br /></td></tr>
<tr class="separator:aeaa14f23f4a7c31725f2dc760e9989cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99556e296f84633f6b7b9a9782e01964"><td class="memItemLeft" align="right" valign="top"><a id="a99556e296f84633f6b7b9a9782e01964"></a>
vector&lt; unsigned &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageCache.html#a99556e296f84633f6b7b9a9782e01964">_lock_counter</a></td></tr>
<tr class="memdesc:a99556e296f84633f6b7b9a9782e01964"><td class="mdescLeft">&#160;</td><td class="mdescRight">allows for multiple locks <br /></td></tr>
<tr class="separator:a99556e296f84633f6b7b9a9782e01964"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59ae40a37f32111fbe4b58f9dc4c7ed4"><td class="memItemLeft" align="right" valign="top"><a id="a59ae40a37f32111fbe4b58f9dc4c7ed4"></a>
list&lt; unsigned &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageCache.html#a59ae40a37f32111fbe4b58f9dc4c7ed4">_free_list</a></td></tr>
<tr class="memdesc:a59ae40a37f32111fbe4b58f9dc4c7ed4"><td class="mdescLeft">&#160;</td><td class="mdescRight">index of images that can be safely released in least-recently-used order <br /></td></tr>
<tr class="separator:a59ae40a37f32111fbe4b58f9dc4c7ed4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a9cb02801b7bf202abe5d93ad615def"><td class="memItemLeft" align="right" valign="top"><a id="a2a9cb02801b7bf202abe5d93ad615def"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageCache.html#a2a9cb02801b7bf202abe5d93ad615def">_bGreyImages</a></td></tr>
<tr class="memdesc:a2a9cb02801b7bf202abe5d93ad615def"><td class="mdescLeft">&#160;</td><td class="mdescRight">store images in greyscale (instead of RGB) <br /></td></tr>
<tr class="separator:a2a9cb02801b7bf202abe5d93ad615def"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a054c2e7f189bb0e7ac4f443ee7c7ff7e"><td class="memItemLeft" align="right" valign="top"><a id="a054c2e7f189bb0e7ac4f443ee7c7ff7e"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageCache.html#a054c2e7f189bb0e7ac4f443ee7c7ff7e">_bBigMemoryModel</a></td></tr>
<tr class="memdesc:a054c2e7f189bb0e7ac4f443ee7c7ff7e"><td class="mdescLeft">&#160;</td><td class="mdescRight">load all images into memory (ignores MAX_IMAGES and MAX_MEMORY) <br /></td></tr>
<tr class="separator:a054c2e7f189bb0e7ac4f443ee7c7ff7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ab8574a46033a81963f43e2e41fc470"><td class="memItemLeft" align="right" valign="top"><a id="a7ab8574a46033a81963f43e2e41fc470"></a>
size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageCache.html#a7ab8574a46033a81963f43e2e41fc470">_imagesLoaded</a></td></tr>
<tr class="memdesc:a7ab8574a46033a81963f43e2e41fc470"><td class="mdescLeft">&#160;</td><td class="mdescRight">number of images loaded <br /></td></tr>
<tr class="separator:a7ab8574a46033a81963f43e2e41fc470"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5703fdd2268a671749e9c0c5c9f1700b"><td class="memItemLeft" align="right" valign="top"><a id="a5703fdd2268a671749e9c0c5c9f1700b"></a>
size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageCache.html#a5703fdd2268a671749e9c0c5c9f1700b">_memoryUsed</a></td></tr>
<tr class="memdesc:a5703fdd2268a671749e9c0c5c9f1700b"><td class="mdescLeft">&#160;</td><td class="mdescRight">bytes used by loaded images <br /></td></tr>
<tr class="separator:a5703fdd2268a671749e9c0c5c9f1700b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3eff9db345f1824f271e1dbeaa59c81"><td class="memItemLeft" align="right" valign="top"><a id="aa3eff9db345f1824f271e1dbeaa59c81"></a>
unsigned&#160;</td><td class="memItemRight" valign="bottom"><b>_dbImagesLocked</b></td></tr>
<tr class="separator:aa3eff9db345f1824f271e1dbeaa59c81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad11fe90fda9fa2778c9bcbc074b96cce"><td class="memItemLeft" align="right" valign="top"><a id="ad11fe90fda9fa2778c9bcbc074b96cce"></a>
unsigned&#160;</td><td class="memItemRight" valign="bottom"><b>_dbImagesLoaded</b></td></tr>
<tr class="separator:ad11fe90fda9fa2778c9bcbc074b96cce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ba6c5326b690c4619ef4f79d65d1101"><td class="memItemLeft" align="right" valign="top"><a id="a4ba6c5326b690c4619ef4f79d65d1101"></a>
size_t&#160;</td><td class="memItemRight" valign="bottom"><b>_dbMaxMemUsed</b></td></tr>
<tr class="separator:a4ba6c5326b690c4619ef4f79d65d1101"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Caches images in memory up to a maximum number of images or memory limit. </p>
<p>The cache is initialized with a list of filenames. Images can then be access by index (fast) or by filename (slower). Images must be locked before being used and then unlocked so that the cache can free them if memory limits are exceeded. Images are removed under a least-recently-used (i.e., unlocked) policy. The same image can be locked multiple times. Each <a class="el" href="classdrwnImageCache.html#a50033c8cd93a874dbc12f3c9f17a09ce" title="lock an image for use (loads if not already in the cache) ">lock()</a> must have a corresponding <a class="el" href="classdrwnImageCache.html#ae19a890a91cf3ce67a7e4c35e7ac5dcf" title="marks an image as free ">unlock()</a>. The following code shows example usage: </p><div class="fragment"><div class="line">vector&lt;string&gt; filenames = <a class="code" href="drwnFileUtils_8h.html#a5f706b259923bb0cb39e57a4eadbe7b1">drwnDirectoryListing</a>(directoryName, <span class="stringliteral">&quot;.jpg&quot;</span>);</div><div class="line"><a class="code" href="classdrwnImageCache.html">drwnImageCache</a> cache(filenames);</div><div class="line"></div><div class="line"><span class="keywordflow">while</span> (stillRunning()) {</div><div class="line">   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> indxA = getFirstImageIndex();</div><div class="line">   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> indxB = getSecondImageIndex();</div><div class="line"></div><div class="line">   cache.lock(indxA);</div><div class="line">   cache.lock(indxB);</div><div class="line"></div><div class="line">   <span class="keyword">const</span> cv::Mat imgA = cache.get(indxA);</div><div class="line">   <span class="keyword">const</span> cv::Mat imgB = cache.get(indxB);</div><div class="line">   processImages(imgA, imgB);</div><div class="line"></div><div class="line">   cache.unlock(indxB);</div><div class="line">   cache.unlock(indxA);</div><div class="line">}</div></div><!-- fragment --><p>The class can be initialized in big memory mode. In this mode all images are pre-loaded and memory/size limits are ignored, resulting in much faster calls to the <a class="el" href="classdrwnImageCache.html#a50033c8cd93a874dbc12f3c9f17a09ce" title="lock an image for use (loads if not already in the cache) ">lock()</a> and <a class="el" href="classdrwnImageCache.html#ae19a890a91cf3ce67a7e4c35e7ac5dcf" title="marks an image as free ">unlock()</a> functions, but may consume all available memory. Big memory mode can be enabled/disabled explicitly via the class constructor. Its default setting is controlled via the <code>BIG_MEMORY</code> static data member.</p>
<dl class="section note"><dt>Note</dt><dd>This class is thread-safe (under Linux).</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classdrwnImagePyramidCache.html" title="Caches image pyramids in main memory up to a maximum number of images or memory limit. ">drwnImagePyramidCache</a> </dd></dl>
</div><hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="drwnImageCache_8h_source.html">drwnImageCache.h</a></li>
<li>drwnImageCache.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed May 7 2025 11:32:27 for Darwin by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
