<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Darwin: Linux Installation Instructions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="drwn.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Darwin
   &#160;<span id="projectnumber">1.10(beta)</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Linux Installation Instructions </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="linuxCodeDownload"></a>
Getting the Code</h1>
<h2><a class="anchor" id="Download"></a>
Download</h2>
<p>Select the appropriate stable release from <a class="el" href="drwnDownloadsDoc.html">here</a> or check out directly from the repository by following the instructions below.</p>
<h2><a class="anchor" id="Repository"></a>
Repository</h2>
<p>For the development branch use: </p><div class="fragment"><div class="line">git clone https:<span class="comment">//github.com/sgould/drwn.git $DARWIN</span></div></div><!-- fragment --><p> or </p><div class="fragment"><div class="line">svn co https:<span class="comment">//github.com/sgould/drwn $DARWIN</span></div></div><!-- fragment --><p>For a stable release (e.g., &lt;x&gt;.&lt;y&gt;) use: </p><div class="fragment"><div class="line">svn co https:<span class="comment">//svn.anu.edu.au/AI/drwn/release/&lt;x&gt;.&lt;y&gt; $DARWIN</span></div></div><!-- fragment --><p>Here <code>$DARWIN</code> refers to the name of the base <b>Darwin</b> directory.</p>
<h2><a class="anchor" id="Projects"></a>
Projects</h2>
<p>After downloading or checking out the main <b>Darwin</b> codebase third-party projects can be installed in <code>$DARWIN/projects</code> along with the released <b>Darwin</b> projects. They will then be automatically built when you build the <b>Darwin</b> projects.</p>
<dl class="section note"><dt>Note</dt><dd>If you develop or install third-party projects in a different directory you can still get <b>Darwin</b> to automatically build them by adding the relative directory path to the <code>DRWN_PROJECTS</code> variable in your <code>make.local</code> file.</dd></dl>
<h1><a class="anchor" id="linuxCodeBuild"></a>
Building the Code</h1>
<p>The following instructions assume that you have downloaded or checked out the code and have changed to the base <b>Darwin</b> directory (i.e., <code>$DARWIN</code>). Before building <b>Darwin</b> you will need to install a number of external libraries that are required by the main <b>Darwin</b> libraries or optionally used by the specific projects you'd like to compile. If you have any of these libraries pre-installed on your system you can just create symbolic links to them, e.g.:</p>
<div class="fragment"><div class="line">ln -s /usr/<a class="code" href="namespacedrwnNNGraphMoves.html#a14c718ac3f3c9c68c16f9877c3c4a308">local</a>/opencv-2.4 external/opencv</div></div><!-- fragment --><p>You may also need to install some system build tools (see <a class="el" href="linuxInstall.html#linuxEssential">Installing Build Tools and External Libraries</a> below).</p>
<p>The required libraries can be installed using a shell script included in the <code>$DARWIN/external</code> directory. (You will need to have the <code>bash</code> shell installed). The commands to install them are: </p><div class="fragment"><div class="line">cd external</div><div class="line">./install.sh <a class="code" href="namespaceEigen.html">Eigen</a></div><div class="line">cd ..</div></div><!-- fragment --><p>If something goes wrong with the install script you can try following the <a class="el" href="linuxInstall.html#linuxDetailed">detailed install instructions</a>.</p>
<p>The optional libraries can be installed with: </p><div class="fragment"><div class="line">cd external</div><div class="line">./install.sh zlib</div><div class="line">./install.sh OpenCV</div><div class="line">./install.sh wxWidgets</div><div class="line">./install.sh lua</div><div class="line">cd ..</div></div><!-- fragment --><p>Make sure you update your <code>LD_LIBRARY_PATH</code> variable to avoid runtime errors: </p><div class="fragment"><div class="line">export LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:${DARWIN}/external/opencv/lib</div></div><!-- fragment --><p>After the external libraries are installed, you can build the <b>Darwin</b> libraries, applications and projects. See <a class="el" href="linuxInstall.html#drwnMakelocal">make.local</a> below for how to control the build process.</p>
<div class="fragment"><div class="line">make</div><div class="line">make drwnprojs</div></div><!-- fragment --><p>You can also build specific projects using </p><div class="fragment"><div class="line">cd project/&lt;PROJECTNAME&gt;</div><div class="line">make</div><div class="line">cd ../..</div></div><!-- fragment --><h2><a class="anchor" id="drwnMakelocal"></a>
make.local</h2>
<p>You can control how the <b>Darwin</b> libraries get built by setting various flags in a file called <code>make.local</code> in the base directory. A typical <code>make.local</code> file might look like:</p>
<div class="fragment"><div class="line"><span class="preprocessor"># local make definitions</span></div><div class="line"></div><div class="line">DRWN_DEBUG_SYMBOLS = 0</div><div class="line">DRWN_SHARED_LIBS = 1</div><div class="line">DRWN_FORCE_32BIT = 0</div><div class="line"></div><div class="line"><span class="preprocessor"># debug statistics</span></div><div class="line">EXTRA_CFLAGS += -DDRWN_DEBUG_STATISTICS</div><div class="line">EXTRA_CFLAGS += -DDRWN_FACTOR_DEBUG_STATISTICS</div><div class="line"></div><div class="line"><span class="preprocessor"># third-party project directories</span></div><div class="line">DRWN_PROJECTS = path_to_my_projects</div><div class="line"></div><div class="line"><span class="preprocessor"># profiling</span></div><div class="line"><span class="preprocessor">#EXTRA_CFLAGS += -pg</span></div><div class="line"><span class="preprocessor">#EXTRA_LFLAGS += -pg</span></div><div class="line"><span class="preprocessor">#DRWN_SHARED_LIBS = 0</span></div></div><!-- fragment --><p>If you choose to link to shared libraries (recommended) then you will need to add the <code>darwin/bin</code> path to your <code>LD_LIBRARY_PATH</code> environment variable.</p>
<p>The following table details the various build options that can be set in <code>make.local</code>.</p>
<center> <table border="1px" width="80%" style="border-color:#cccccc; 
       background-color: #f5f5f5; border-collapse:collapse">
<tr>
<td><b>Option</b></td><td><b>Description</b></td><td><b>Default</b>  </td></tr>
<tr>
<td>DRWN_FORCE_32BIT </td><td>Force 32-bit build even on 64-bit environments. This is useful if you are deploying your applications on heterogeneous (32-bit and 64-bit) clusters. </td><td>0  </td></tr>
<tr>
<td>DRWN_DEBUG_SYMBOLS </td><td>Include debugging information in binaries. </td><td>0  </td></tr>
<tr>
<td>DRWN_SHARED_LIBS </td><td>Build and link to shared libraries. </td><td>1  </td></tr>
<tr>
<td>DRWN_BUILD_VISION_LIB </td><td>Force building the vision library. </td><td>1 if OpenCV is installed<br />
0 otherwise  </td></tr>
</table>
</center><p>Additional debugging/statistics information can be included by defining the following compiler symbols: <code>DRWN_DEBUG_STATISTICS</code>, <code>DRWN_FACTOR_DEBUG_STATISTICS</code>.</p>
<h1><a class="anchor" id="linuxEssential"></a>
Installing Build Tools and External Libraries</h1>
<p>The following commands will install the a number of packages required to build <b>Darwin</b> libraries and applications on Ubuntu systems. You will need superuser privledges to install these packages.</p>
<div class="fragment"><div class="line"><span class="preprocessor"># required to get access code repository</span></div><div class="line">sudo apt-<span class="keyword">get</span> install git</div><div class="line"></div><div class="line"><span class="preprocessor"># required for building the code (usually already installed)</span></div><div class="line">sudo apt-<span class="keyword">get</span> install build-essential g++ wget</div><div class="line"></div><div class="line"><span class="preprocessor"># required by opencv</span></div><div class="line">sudo apt-<span class="keyword">get</span> install cmake ffmpeg</div><div class="line">sudo apt-<span class="keyword">get</span> install gtk+-2.0 gtk2.0-dev libgl1-mesa-dev libglu1-mesa-dev</div><div class="line">sudo apt-<span class="keyword">get</span> install pkg-config</div><div class="line"></div><div class="line"><span class="preprocessor"># required by lua</span></div><div class="line">sudo apt-<span class="keyword">get</span> install libreadline6-dev</div><div class="line"></div><div class="line"><span class="preprocessor"># required for building documentation</span></div><div class="line"><span class="preprocessor">sudo apt-get install doxygen graphviz</span></div></div><!-- fragment --><h2><a class="anchor" id="linuxDetailed"></a>
Detailed Install Instructions for Third-Party Libraries</h2>
<p>Third-party libraries required by <b>Darwin</b> (and associated projects) can be installed as described <a class="el" href="linuxInstall.html#linuxCodeBuild">above</a>. However, if something goes wrong you may need to install these libraries manually. The following describes that process.</p>
<p><b>"Eigen Linear Algebra Library"</b> </p>
<div class="fragment"><div class="line">cd external</div><div class="line">wget http:<span class="comment">//bitbucket.org/eigen/eigen/get/3.2.3.tar.bz2 -O eigen-3.2.3.tar.bz2</span></div><div class="line">bunzip2 eigen-3.2.3.tar.bz2</div><div class="line">tar xvf eigen-3.2.3.tar</div><div class="line">mv eigen-eigen-36fd1ba04c12 eigen-3.2.3</div><div class="line">rm -f eigen-3.2.3.tar</div><div class="line">ln -s eigen-3.2.3/<a class="code" href="namespaceEigen.html">Eigen</a> <a class="code" href="namespaceEigen.html">Eigen</a></div><div class="line">cd ..</div></div><!-- fragment --><dl class="section warning"><dt>Warning</dt><dd>Sometimes Eigen changes the name of the directory within the tarball. If the <code>mv</code> step fails, check the directory name and modify appropriately.</dd></dl>
<p><b>"OpenCV Computer Vision Library"</b> </p>
<div class="fragment"><div class="line">cd external</div><div class="line">wget -c https:<span class="comment">//github.com/Itseez/opencv/archive/2.4.9.tar.gz</span></div><div class="line">tar zxvf 2.4.9.tar.gz</div><div class="line">cd opencv-2.4.9</div><div class="line">cmake -D CMAKE_BUILD_TYPE=RELEASE \</div><div class="line">      -D CMAKE_INSTALL_PREFIX=../opencv \</div><div class="line">      -D BUILD_NEW_PYTHON_SUPPORT=OFF .</div><div class="line">make</div><div class="line">make install</div><div class="line">cd ../..</div></div><!-- fragment --><p>Make sure the file <code>external/opencv/lib/pkgconfig/opencv.pc</code> exists. If not you have probably installed OpenCV in the wrong location.</p>
<p>If you experience linker problems (e.g., <code>"/usr/bin/ld: error: cannot find -lcudart"</code>) then try compiling OpenCV without CUDA support by adding <code>"-D WITH_CUDA=OFF"</code> to the <code>cmake</code> command above.</p>
<h2><a class="anchor" id="drwnMatlabLinux"></a>
Matlab</h2>
<p>Building the Matlab project requires Matlab to be installed on the system and a symbolic link setup in the external directory, e.g., </p><div class="fragment"><div class="line">ln -s /usr/<a class="code" href="namespacedrwnNNGraphMoves.html#a14c718ac3f3c9c68c16f9877c3c4a308">local</a>/MATLAB/R2015b/ external/matlab</div></div><!-- fragment --><p>Furthermore, the Matlab library directory should be added to the path, </p><div class="fragment"><div class="line">export LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:/usr/<a class="code" href="namespacedrwnNNGraphMoves.html#a14c718ac3f3c9c68c16f9877c3c4a308">local</a>/MATLAB/R2015b/bin/glna64/</div></div><!-- fragment --><p> or </p><div class="fragment"><div class="line">export LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:/usr/<a class="code" href="namespacedrwnNNGraphMoves.html#a14c718ac3f3c9c68c16f9877c3c4a308">local</a>/MATLAB/R2015b/bin/glnx86/</div></div><!-- fragment --><p> for 32-bit systems.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="drwnProjMatlab.html#drwnProjMatlabInstall">Compiling Mex Projects</a></dd></dl>
<h2><a class="anchor" id="drwnNCI"></a>
NCI National Facility (nf.nci.org.au)</h2>
<p>If you are running <b>Darwin</b> on the NCI cluster machines then you will need to follow these instructions. Before installing externals:</p>
<div class="fragment"><div class="line">setenv CC gcc</div><div class="line">setenv CXX g++</div><div class="line">module <a class="code" href="drwnXMLUtils_8h.html#a2fca02d61876cbdab6c38edcf34a285d">load</a> cmake/2.8.2</div></div><!-- fragment --><p>Add to <code></code>.login </p><div class="fragment"><div class="line">setenv LD_LIBRARY_PATH ${LD_LIBRARY_PATH}:${DARWIN}/external/opencv/lib</div></div><!-- fragment --><p>or <code></code>.profile </p><div class="fragment"><div class="line">export LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:${DARWIN}/external/opencv/lib</div></div><!-- fragment --><h1><a class="anchor" id="drwnExtLinking"></a>
Linking Darwin from External Projects</h1>
<p>The following is a sample Makefile that demonstrates how to link the Darwin libraries from external projects </p><div class="fragment"><div class="line">DRWN_DIR =</div><div class="line">INC_DIRS = -I${DRWN_DIR}/include -I${DRWN_DIR}/external</div><div class="line">LIBS = -L${DRWN_DIR}/bin -ldrwnML -ldrwnPGM -ldrwnIO -ldrwnBase -lm -lpthread</div><div class="line"></div><div class="line">main:</div><div class="line">        g++ -g -o main main.cpp ${INC_DIRS} ${LIBS}</div><div class="line"></div><div class="line">clean:</div><div class="line">    rm -f main</div></div><!-- fragment --><dl class="section warning"><dt>Warning</dt><dd>The <b>Darwin</b> libraries should be included in reverse dependency order (as listed above) to avoid linker errors. </dd></dl>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed May 7 2025 09:52:24 for Darwin by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
