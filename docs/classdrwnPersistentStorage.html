<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Darwin: drwnPersistentStorage Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="drwn.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Darwin
   &#160;<span id="projectnumber">1.10(beta)</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pro-static-attribs">Static Protected Attributes</a> &#124;
<a href="classdrwnPersistentStorage-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">drwnPersistentStorage Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Provides indexed storage for multiple records using two files (a binary data file and a text index file).  
 <a href="classdrwnPersistentStorage.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad1f4f8678ee91b333e318d47b3ad4173"><td class="memItemLeft" align="right" valign="top"><a id="ad1f4f8678ee91b333e318d47b3ad4173"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>drwnPersistentStorage</b> (bool bCompressed=false)</td></tr>
<tr class="separator:ad1f4f8678ee91b333e318d47b3ad4173"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8aa398d436cb74dd3e77ab255add3c2"><td class="memItemLeft" align="right" valign="top"><a id="ad8aa398d436cb74dd3e77ab255add3c2"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>drwnPersistentStorage</b> (const <a class="el" href="classdrwnPersistentStorage.html">drwnPersistentStorage</a> &amp;storage)</td></tr>
<tr class="separator:ad8aa398d436cb74dd3e77ab255add3c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a4b9cabb8f996afdfa563367e7b1798"><td class="memItemLeft" align="right" valign="top"><a id="a0a4b9cabb8f996afdfa563367e7b1798"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnPersistentStorage.html#a0a4b9cabb8f996afdfa563367e7b1798">open</a> (const char *indexFile, const char *dataFile)</td></tr>
<tr class="memdesc:a0a4b9cabb8f996afdfa563367e7b1798"><td class="mdescLeft">&#160;</td><td class="mdescRight">open persistent storage index and data files <br /></td></tr>
<tr class="separator:a0a4b9cabb8f996afdfa563367e7b1798"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98167bab2f55eae91f5bd24899515683"><td class="memItemLeft" align="right" valign="top"><a id="a98167bab2f55eae91f5bd24899515683"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnPersistentStorage.html#a98167bab2f55eae91f5bd24899515683">open</a> (const char *fileStem)</td></tr>
<tr class="memdesc:a98167bab2f55eae91f5bd24899515683"><td class="mdescLeft">&#160;</td><td class="mdescRight">open persistent storage using default extension for index and data files <br /></td></tr>
<tr class="separator:a98167bab2f55eae91f5bd24899515683"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d8d575946f8b15fa62ae28cde6d649e"><td class="memItemLeft" align="right" valign="top"><a id="a5d8d575946f8b15fa62ae28cde6d649e"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnPersistentStorage.html#a5d8d575946f8b15fa62ae28cde6d649e">reopen</a> ()</td></tr>
<tr class="memdesc:a5d8d575946f8b15fa62ae28cde6d649e"><td class="mdescLeft">&#160;</td><td class="mdescRight">re-open previously opened persistent storage files <br /></td></tr>
<tr class="separator:a5d8d575946f8b15fa62ae28cde6d649e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f902a5ca4b22564c0216dd2f7985b81"><td class="memItemLeft" align="right" valign="top"><a id="a6f902a5ca4b22564c0216dd2f7985b81"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnPersistentStorage.html#a6f902a5ca4b22564c0216dd2f7985b81">close</a> ()</td></tr>
<tr class="memdesc:a6f902a5ca4b22564c0216dd2f7985b81"><td class="mdescLeft">&#160;</td><td class="mdescRight">close (and write) persistent storage files <br /></td></tr>
<tr class="separator:a6f902a5ca4b22564c0216dd2f7985b81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adeb4708b323c77230a67224deb9543d0"><td class="memItemLeft" align="right" valign="top"><a id="adeb4708b323c77230a67224deb9543d0"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnPersistentStorage.html#adeb4708b323c77230a67224deb9543d0">isOpen</a> () const</td></tr>
<tr class="memdesc:adeb4708b323c77230a67224deb9543d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns true if the persistent storage has been opened and not closed <br /></td></tr>
<tr class="separator:adeb4708b323c77230a67224deb9543d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad61bac703f73444166a1a3b530099ff"><td class="memItemLeft" align="right" valign="top"><a id="aad61bac703f73444166a1a3b530099ff"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnPersistentStorage.html#aad61bac703f73444166a1a3b530099ff">canReopen</a> () const</td></tr>
<tr class="memdesc:aad61bac703f73444166a1a3b530099ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns true if the persistent storage object has valid filenames but is currently closed <br /></td></tr>
<tr class="separator:aad61bac703f73444166a1a3b530099ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a256bb003b8689775a0ba3e61ea3416ac"><td class="memItemLeft" align="right" valign="top"><a id="a256bb003b8689775a0ba3e61ea3416ac"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnPersistentStorage.html#a256bb003b8689775a0ba3e61ea3416ac">numRecords</a> () const</td></tr>
<tr class="memdesc:a256bb003b8689775a0ba3e61ea3416ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">number of <a class="el" href="classdrwnPersistentRecord.html" title="Interface class for drwnPersistentStorage. ">drwnPersistentRecord</a> records stored on disk <br /></td></tr>
<tr class="separator:a256bb003b8689775a0ba3e61ea3416ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cc32fb1496a9e74590a6d303798a5f1"><td class="memItemLeft" align="right" valign="top"><a id="a1cc32fb1496a9e74590a6d303798a5f1"></a>
size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnPersistentStorage.html#a1cc32fb1496a9e74590a6d303798a5f1">numTotalBytes</a> () const</td></tr>
<tr class="memdesc:a1cc32fb1496a9e74590a6d303798a5f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">total number of bytes on disk used by the data file <br /></td></tr>
<tr class="separator:a1cc32fb1496a9e74590a6d303798a5f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad15d868ac2d1cac4c8f9c3b66e1f47e5"><td class="memItemLeft" align="right" valign="top"><a id="ad15d868ac2d1cac4c8f9c3b66e1f47e5"></a>
size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnPersistentStorage.html#ad15d868ac2d1cac4c8f9c3b66e1f47e5">numUsedBytes</a> () const</td></tr>
<tr class="memdesc:ad15d868ac2d1cac4c8f9c3b66e1f47e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">number of bytes on disk actually needed by the data file <br /></td></tr>
<tr class="separator:ad15d868ac2d1cac4c8f9c3b66e1f47e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4dafb02e6d4b36e33edabda4f4bd7706"><td class="memItemLeft" align="right" valign="top"><a id="a4dafb02e6d4b36e33edabda4f4bd7706"></a>
size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnPersistentStorage.html#a4dafb02e6d4b36e33edabda4f4bd7706">numFreeBytes</a> () const</td></tr>
<tr class="memdesc:a4dafb02e6d4b36e33edabda4f4bd7706"><td class="mdescLeft">&#160;</td><td class="mdescRight">number of free bytes (due to fragmentation) in data file <br /></td></tr>
<tr class="separator:a4dafb02e6d4b36e33edabda4f4bd7706"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7475da8abf2bdf9a35a14fdef9670d5"><td class="memItemLeft" align="right" valign="top"><a id="ab7475da8abf2bdf9a35a14fdef9670d5"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnPersistentStorage.html#ab7475da8abf2bdf9a35a14fdef9670d5">hasKey</a> (const char *key) const</td></tr>
<tr class="memdesc:ab7475da8abf2bdf9a35a14fdef9670d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns true if a record with given key exists in the persistent storage <br /></td></tr>
<tr class="separator:ab7475da8abf2bdf9a35a14fdef9670d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cc6875326cf2ffba2b6d396110f2747"><td class="memItemLeft" align="right" valign="top"><a id="a8cc6875326cf2ffba2b6d396110f2747"></a>
set&lt; string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnPersistentStorage.html#a8cc6875326cf2ffba2b6d396110f2747">getKeys</a> () const</td></tr>
<tr class="memdesc:a8cc6875326cf2ffba2b6d396110f2747"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns all keys stored in the persistent storage object <br /></td></tr>
<tr class="separator:a8cc6875326cf2ffba2b6d396110f2747"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c8ed3092b865abd82ef14980101cc6f"><td class="memItemLeft" align="right" valign="top"><a id="a2c8ed3092b865abd82ef14980101cc6f"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnPersistentStorage.html#a2c8ed3092b865abd82ef14980101cc6f">erase</a> (const char *key)</td></tr>
<tr class="memdesc:a2c8ed3092b865abd82ef14980101cc6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">erases the record with given key <br /></td></tr>
<tr class="separator:a2c8ed3092b865abd82ef14980101cc6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad785a73aec6aceab2ce6092fcebb9852"><td class="memItemLeft" align="right" valign="top"><a id="ad785a73aec6aceab2ce6092fcebb9852"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnPersistentStorage.html#ad785a73aec6aceab2ce6092fcebb9852">read</a> (const char *key, <a class="el" href="classdrwnPersistentRecord.html">drwnPersistentRecord</a> *record)</td></tr>
<tr class="memdesc:ad785a73aec6aceab2ce6092fcebb9852"><td class="mdescLeft">&#160;</td><td class="mdescRight">reads the record with given key <br /></td></tr>
<tr class="separator:ad785a73aec6aceab2ce6092fcebb9852"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a015314f4ef392424ea90597ac570664d"><td class="memItemLeft" align="right" valign="top"><a id="a015314f4ef392424ea90597ac570664d"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnPersistentStorage.html#a015314f4ef392424ea90597ac570664d">write</a> (const char *key, const <a class="el" href="classdrwnPersistentRecord.html">drwnPersistentRecord</a> *record)</td></tr>
<tr class="memdesc:a015314f4ef392424ea90597ac570664d"><td class="mdescLeft">&#160;</td><td class="mdescRight">writes the record with given key <br /></td></tr>
<tr class="separator:a015314f4ef392424ea90597ac570664d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a550b0551aba5b2c743ec06b5fd980cf9"><td class="memItemLeft" align="right" valign="top"><a id="a550b0551aba5b2c743ec06b5fd980cf9"></a>
size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnPersistentStorage.html#a550b0551aba5b2c743ec06b5fd980cf9">bytes</a> (const char *key) const</td></tr>
<tr class="memdesc:a550b0551aba5b2c743ec06b5fd980cf9"><td class="mdescLeft">&#160;</td><td class="mdescRight">number of bytes on disk used for record with given key <br /></td></tr>
<tr class="separator:a550b0551aba5b2c743ec06b5fd980cf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad24ed2a7cce7097afb94db0708adf4d8"><td class="memItemLeft" align="right" valign="top"><a id="ad24ed2a7cce7097afb94db0708adf4d8"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnPersistentStorage.html#ad24ed2a7cce7097afb94db0708adf4d8">clear</a> ()</td></tr>
<tr class="memdesc:ad24ed2a7cce7097afb94db0708adf4d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">clears all records from the persistent storage object (takes affect when closed) <br /></td></tr>
<tr class="separator:ad24ed2a7cce7097afb94db0708adf4d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ab00c40b191a6b40a7b42cead745c63"><td class="memItemLeft" align="right" valign="top"><a id="a6ab00c40b191a6b40a7b42cead745c63"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnPersistentStorage.html#a6ab00c40b191a6b40a7b42cead745c63">defragment</a> ()</td></tr>
<tr class="memdesc:a6ab00c40b191a6b40a7b42cead745c63"><td class="mdescLeft">&#160;</td><td class="mdescRight">defragments data file <br /></td></tr>
<tr class="separator:a6ab00c40b191a6b40a7b42cead745c63"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a475e43d93fbeadc3e9347d438b6d8eb9"><td class="memItemLeft" align="right" valign="top"><a id="a475e43d93fbeadc3e9347d438b6d8eb9"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnPersistentStorage.html#a475e43d93fbeadc3e9347d438b6d8eb9">MAX_OPEN</a> = 16</td></tr>
<tr class="memdesc:a475e43d93fbeadc3e9347d438b6d8eb9"><td class="mdescLeft">&#160;</td><td class="mdescRight">max. number of open files <br /></td></tr>
<tr class="separator:a475e43d93fbeadc3e9347d438b6d8eb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab61e5f130d1caa709a00cff18f6b736f"><td class="memItemLeft" align="right" valign="top"><a id="ab61e5f130d1caa709a00cff18f6b736f"></a>
static string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnPersistentStorage.html#ab61e5f130d1caa709a00cff18f6b736f">DEFAULT_INDEX_EXT</a> = string(&quot;.index&quot;)</td></tr>
<tr class="memdesc:ab61e5f130d1caa709a00cff18f6b736f"><td class="mdescLeft">&#160;</td><td class="mdescRight">default extension for index files <br /></td></tr>
<tr class="separator:ab61e5f130d1caa709a00cff18f6b736f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a127714ee2713974f089da669053887ce"><td class="memItemLeft" align="right" valign="top"><a id="a127714ee2713974f089da669053887ce"></a>
static string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnPersistentStorage.html#a127714ee2713974f089da669053887ce">DEFAULT_DATA_EXT</a> = string(&quot;.data&quot;)</td></tr>
<tr class="memdesc:a127714ee2713974f089da669053887ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">default extension for data files <br /></td></tr>
<tr class="separator:a127714ee2713974f089da669053887ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a4cc3a49e87e485354d14c509114a7c45"><td class="memItemLeft" align="right" valign="top"><a id="a4cc3a49e87e485354d14c509114a7c45"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnPersistentStorage.html#a4cc3a49e87e485354d14c509114a7c45">suspend</a> ()</td></tr>
<tr class="memdesc:a4cc3a49e87e485354d14c509114a7c45"><td class="mdescLeft">&#160;</td><td class="mdescRight">self-suspend (close) <br /></td></tr>
<tr class="separator:a4cc3a49e87e485354d14c509114a7c45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeaae72a0b46b2241857942dba313d65f"><td class="memItemLeft" align="right" valign="top"><a id="aeaae72a0b46b2241857942dba313d65f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnPersistentStorage.html#aeaae72a0b46b2241857942dba313d65f">resume</a> ()</td></tr>
<tr class="memdesc:aeaae72a0b46b2241857942dba313d65f"><td class="mdescLeft">&#160;</td><td class="mdescRight">reopen if suspended <br /></td></tr>
<tr class="separator:aeaae72a0b46b2241857942dba313d65f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99c6950480b5b619b74f07b3fe3b64ad"><td class="memItemLeft" align="right" valign="top"><a id="a99c6950480b5b619b74f07b3fe3b64ad"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnPersistentStorage.html#a99c6950480b5b619b74f07b3fe3b64ad">atomic_reopen</a> (bool locked)</td></tr>
<tr class="memdesc:a99c6950480b5b619b74f07b3fe3b64ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">perform an atomic reopen operation <br /></td></tr>
<tr class="separator:a99c6950480b5b619b74f07b3fe3b64ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e654b8e6f117bdd4d3cf3db2136cf16"><td class="memItemLeft" align="right" valign="top"><a id="a7e654b8e6f117bdd4d3cf3db2136cf16"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnPersistentStorage.html#a7e654b8e6f117bdd4d3cf3db2136cf16">atomic_close</a> (bool locked)</td></tr>
<tr class="memdesc:a7e654b8e6f117bdd4d3cf3db2136cf16"><td class="mdescLeft">&#160;</td><td class="mdescRight">perform an atomic close operation <br /></td></tr>
<tr class="separator:a7e654b8e6f117bdd4d3cf3db2136cf16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46fe2bb9f0486887b5afe682b5b5ebac"><td class="memItemLeft" align="right" valign="top"><a id="a46fe2bb9f0486887b5afe682b5b5ebac"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnPersistentStorage.html#a46fe2bb9f0486887b5afe682b5b5ebac">atomic_suspend</a> (bool locked)</td></tr>
<tr class="memdesc:a46fe2bb9f0486887b5afe682b5b5ebac"><td class="mdescLeft">&#160;</td><td class="mdescRight">perform an atomic suspend operation <br /></td></tr>
<tr class="separator:a46fe2bb9f0486887b5afe682b5b5ebac"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a0a423c9aa612ac1bee53315cf28c72dc"><td class="memItemLeft" align="right" valign="top"><a id="a0a423c9aa612ac1bee53315cf28c72dc"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnPersistentStorage.html#a0a423c9aa612ac1bee53315cf28c72dc">_indexFilename</a></td></tr>
<tr class="memdesc:a0a423c9aa612ac1bee53315cf28c72dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">name of index file <br /></td></tr>
<tr class="separator:a0a423c9aa612ac1bee53315cf28c72dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06c372b4f315bffc6d45e094e9ae8bb2"><td class="memItemLeft" align="right" valign="top"><a id="a06c372b4f315bffc6d45e094e9ae8bb2"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnPersistentStorage.html#a06c372b4f315bffc6d45e094e9ae8bb2">_dataFilename</a></td></tr>
<tr class="memdesc:a06c372b4f315bffc6d45e094e9ae8bb2"><td class="mdescLeft">&#160;</td><td class="mdescRight">name of data file <br /></td></tr>
<tr class="separator:a06c372b4f315bffc6d45e094e9ae8bb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07890cc0fbefd33fa96f732fbe71e52f"><td class="memItemLeft" align="right" valign="top"><a id="a07890cc0fbefd33fa96f732fbe71e52f"></a>
map&lt; string, <a class="el" href="classdrwnPersistentBlock.html">drwnPersistentBlock</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnPersistentStorage.html#a07890cc0fbefd33fa96f732fbe71e52f">_recordMapping</a></td></tr>
<tr class="memdesc:a07890cc0fbefd33fa96f732fbe71e52f"><td class="mdescLeft">&#160;</td><td class="mdescRight">key, start, length <br /></td></tr>
<tr class="separator:a07890cc0fbefd33fa96f732fbe71e52f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a89b72774bd8eaaa58fbbd9c9296bfc"><td class="memItemLeft" align="right" valign="top"><a id="a7a89b72774bd8eaaa58fbbd9c9296bfc"></a>
list&lt; <a class="el" href="classdrwnPersistentBlock.html">drwnPersistentBlock</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnPersistentStorage.html#a7a89b72774bd8eaaa58fbbd9c9296bfc">_freeSpace</a></td></tr>
<tr class="memdesc:a7a89b72774bd8eaaa58fbbd9c9296bfc"><td class="mdescLeft">&#160;</td><td class="mdescRight">start, length <br /></td></tr>
<tr class="separator:a7a89b72774bd8eaaa58fbbd9c9296bfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32da36ba31f4a183b7bf4595cca6c270"><td class="memItemLeft" align="right" valign="top"><a id="a32da36ba31f4a183b7bf4595cca6c270"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnPersistentStorage.html#a32da36ba31f4a183b7bf4595cca6c270">_bCompressed</a></td></tr>
<tr class="memdesc:a32da36ba31f4a183b7bf4595cca6c270"><td class="mdescLeft">&#160;</td><td class="mdescRight">data in storage is compressed <br /></td></tr>
<tr class="separator:a32da36ba31f4a183b7bf4595cca6c270"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98d0fc3b7f60b896d2539e343f8790a8"><td class="memItemLeft" align="right" valign="top"><a id="a98d0fc3b7f60b896d2539e343f8790a8"></a>
fstream *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnPersistentStorage.html#a98d0fc3b7f60b896d2539e343f8790a8">_fsdata</a></td></tr>
<tr class="memdesc:a98d0fc3b7f60b896d2539e343f8790a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">data file stream (if open) <br /></td></tr>
<tr class="separator:a98d0fc3b7f60b896d2539e343f8790a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad22aad65e0d38ff5cb930d0d805b4d1"><td class="memItemLeft" align="right" valign="top"><a id="aad22aad65e0d38ff5cb930d0d805b4d1"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnPersistentStorage.html#aad22aad65e0d38ff5cb930d0d805b4d1">_bSuspended</a></td></tr>
<tr class="memdesc:aad22aad65e0d38ff5cb930d0d805b4d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">self-suspended vs. closed (will reopen on any operation) <br /></td></tr>
<tr class="separator:aad22aad65e0d38ff5cb930d0d805b4d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c6f45db82dd8f67694151bb38eb1955"><td class="memItemLeft" align="right" valign="top"><a id="a2c6f45db82dd8f67694151bb38eb1955"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnPersistentStorage.html#a2c6f45db82dd8f67694151bb38eb1955">_bDirty</a></td></tr>
<tr class="memdesc:a2c6f45db82dd8f67694151bb38eb1955"><td class="mdescLeft">&#160;</td><td class="mdescRight">data has been written to the storage since opened <br /></td></tr>
<tr class="separator:a2c6f45db82dd8f67694151bb38eb1955"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-static-attribs"></a>
Static Protected Attributes</h2></td></tr>
<tr class="memitem:a6f0cff20599f14d088eaa29c95c1045f"><td class="memItemLeft" align="right" valign="top"><a id="a6f0cff20599f14d088eaa29c95c1045f"></a>
static list&lt; <a class="el" href="classdrwnPersistentStorage.html">drwnPersistentStorage</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnPersistentStorage.html#a6f0cff20599f14d088eaa29c95c1045f">_openList</a></td></tr>
<tr class="memdesc:a6f0cff20599f14d088eaa29c95c1045f"><td class="mdescLeft">&#160;</td><td class="mdescRight">list of open storage <br /></td></tr>
<tr class="separator:a6f0cff20599f14d088eaa29c95c1045f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Provides indexed storage for multiple records using two files (a binary data file and a text index file). </p>
<p>The class maintains an open stream to the data file. The index file is written on closing. A closed storage object can be reopened without having to re-parse the index file. The class also manages the maximum number of actively open storage objects. If more storage objects are opened, the oldest ones will be suspended (temporarily closes). Any operation to the storage object will automatically re-open (resume) the storage (possibly suspending other storage objects). To use this class, objects must implement the <a class="el" href="classdrwnPersistentRecord.html" title="Interface class for drwnPersistentStorage. ">drwnPersistentRecord</a> interface. Automatic compression of records can be set and is managed by through the <a class="el" href="classdrwnCompressionBuffer.html" title="Utility class for compressing data using the zlib library. ">drwnCompressionBuffer</a> class.</p>
<p>The <a class="el" href="classdrwnPersistentStorage.html#a2c8ed3092b865abd82ef14980101cc6f" title="erases the record with given key ">erase()</a>, <a class="el" href="classdrwnPersistentStorage.html#ad785a73aec6aceab2ce6092fcebb9852" title="reads the record with given key ">read()</a> and <a class="el" href="classdrwnPersistentStorage.html#a015314f4ef392424ea90597ac570664d" title="writes the record with given key ">write()</a> methods are thread-safe allowing the same persistent storage object to be accessed from multiple threads.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="drwnTutorial.html">Darwin Tutorial</a> for an example. </dd></dl>
</div><hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="drwnPersistentStorage_8h_source.html">drwnPersistentStorage.h</a></li>
<li>drwnPersistentStorage.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed May 7 2025 09:52:24 for Darwin by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
