<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Darwin: drwnMaskedPatchMatch Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="drwn.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Darwin
   &#160;<span id="projectnumber">1.10(beta)</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classdrwnMaskedPatchMatch-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">drwnMaskedPatchMatch Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Implements the basic PatchMatch algorithm of Barnes et al., SIGGRAPH 2009 on masked images.  
 <a href="classdrwnMaskedPatchMatch.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:abfcd255bce6b8e9f74d271b99b9d5367"><td class="memItemLeft" align="right" valign="top"><a id="abfcd255bce6b8e9f74d271b99b9d5367"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#abfcd255bce6b8e9f74d271b99b9d5367">drwnMaskedPatchMatch</a> (const cv::Mat &amp;imgA, const cv::Mat &amp;imgB, unsigned patchRadius)</td></tr>
<tr class="memdesc:abfcd255bce6b8e9f74d271b99b9d5367"><td class="mdescLeft">&#160;</td><td class="mdescRight">construct without masks and square patches <br /></td></tr>
<tr class="separator:abfcd255bce6b8e9f74d271b99b9d5367"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5ac63f11aad326e9f9aad3763fd2350"><td class="memItemLeft" align="right" valign="top"><a id="ab5ac63f11aad326e9f9aad3763fd2350"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#ab5ac63f11aad326e9f9aad3763fd2350">drwnMaskedPatchMatch</a> (const cv::Mat &amp;imgA, const cv::Mat &amp;imgB, const cv::Size &amp;patchRadius)</td></tr>
<tr class="memdesc:ab5ac63f11aad326e9f9aad3763fd2350"><td class="mdescLeft">&#160;</td><td class="mdescRight">construct without masks and arbitrary patches <br /></td></tr>
<tr class="separator:ab5ac63f11aad326e9f9aad3763fd2350"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7af3d115e7f0a6ac3572584bf869eeb"><td class="memItemLeft" align="right" valign="top"><a id="aa7af3d115e7f0a6ac3572584bf869eeb"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#aa7af3d115e7f0a6ac3572584bf869eeb">drwnMaskedPatchMatch</a> (const cv::Mat &amp;imgA, const cv::Mat &amp;imgB, const cv::Mat &amp;maskA, const cv::Mat &amp;maskB, unsigned patchRadius)</td></tr>
<tr class="memdesc:aa7af3d115e7f0a6ac3572584bf869eeb"><td class="mdescLeft">&#160;</td><td class="mdescRight">costruct with matching masks (empty for no mask) and square patches <br /></td></tr>
<tr class="separator:aa7af3d115e7f0a6ac3572584bf869eeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88f483fff0e0eebae3d6d8d7343ddbe3"><td class="memItemLeft" align="right" valign="top"><a id="a88f483fff0e0eebae3d6d8d7343ddbe3"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#a88f483fff0e0eebae3d6d8d7343ddbe3">drwnMaskedPatchMatch</a> (const cv::Mat &amp;imgA, const cv::Mat &amp;imgB, const cv::Mat &amp;maskA, const cv::Mat &amp;maskB, const cv::Size &amp;patchRadius)</td></tr>
<tr class="memdesc:a88f483fff0e0eebae3d6d8d7343ddbe3"><td class="mdescLeft">&#160;</td><td class="mdescRight">costruct with matching masks (empty for no mask) and arbitrary patches <br /></td></tr>
<tr class="separator:a88f483fff0e0eebae3d6d8d7343ddbe3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07411f8d6b919ab272aedbd2b149655b"><td class="memItemLeft" align="right" valign="top"><a id="a07411f8d6b919ab272aedbd2b149655b"></a>
virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#a07411f8d6b919ab272aedbd2b149655b">~drwnMaskedPatchMatch</a> ()</td></tr>
<tr class="memdesc:a07411f8d6b919ab272aedbd2b149655b"><td class="mdescLeft">&#160;</td><td class="mdescRight">destructor <br /></td></tr>
<tr class="separator:a07411f8d6b919ab272aedbd2b149655b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e07f1a40be696ee685fed6b4d1b5064"><td class="memItemLeft" align="right" valign="top"><a id="a8e07f1a40be696ee685fed6b4d1b5064"></a>
const cv::Mat &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#a8e07f1a40be696ee685fed6b4d1b5064">getSourceImage</a> () const</td></tr>
<tr class="memdesc:a8e07f1a40be696ee685fed6b4d1b5064"><td class="mdescLeft">&#160;</td><td class="mdescRight">return the source image <br /></td></tr>
<tr class="separator:a8e07f1a40be696ee685fed6b4d1b5064"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedca278f5b0d229aaea0fba030230222"><td class="memItemLeft" align="right" valign="top"><a id="aedca278f5b0d229aaea0fba030230222"></a>
const cv::Mat &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#aedca278f5b0d229aaea0fba030230222">getTargetImage</a> () const</td></tr>
<tr class="memdesc:aedca278f5b0d229aaea0fba030230222"><td class="mdescLeft">&#160;</td><td class="mdescRight">return the target image <br /></td></tr>
<tr class="separator:aedca278f5b0d229aaea0fba030230222"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad820dc5eff184bb769e5bb144a133fde"><td class="memItemLeft" align="right" valign="top"><a id="ad820dc5eff184bb769e5bb144a133fde"></a>
const cv::Mat &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#ad820dc5eff184bb769e5bb144a133fde">getSourceMask</a> () const</td></tr>
<tr class="memdesc:ad820dc5eff184bb769e5bb144a133fde"><td class="mdescLeft">&#160;</td><td class="mdescRight">return the source mask <br /></td></tr>
<tr class="separator:ad820dc5eff184bb769e5bb144a133fde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bda0c8724afeca333795fc0881b8f12"><td class="memItemLeft" align="right" valign="top"><a id="a9bda0c8724afeca333795fc0881b8f12"></a>
const cv::Mat &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#a9bda0c8724afeca333795fc0881b8f12">getTargetMask</a> () const</td></tr>
<tr class="memdesc:a9bda0c8724afeca333795fc0881b8f12"><td class="mdescLeft">&#160;</td><td class="mdescRight">return the target mask <br /></td></tr>
<tr class="separator:a9bda0c8724afeca333795fc0881b8f12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab761ec4b846413bef84e417c2a07b4b1"><td class="memItemLeft" align="right" valign="top"><a id="ab761ec4b846413bef84e417c2a07b4b1"></a>
cv::Size&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#ab761ec4b846413bef84e417c2a07b4b1">getPatchSize</a> () const</td></tr>
<tr class="memdesc:ab761ec4b846413bef84e417c2a07b4b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">return the patch size <br /></td></tr>
<tr class="separator:ab761ec4b846413bef84e417c2a07b4b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80f3fb70e1c88ead16a0f203c9200bea"><td class="memItemLeft" align="right" valign="top"><a id="a80f3fb70e1c88ead16a0f203c9200bea"></a>
cv::Size&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#a80f3fb70e1c88ead16a0f203c9200bea">getFieldSize</a> () const</td></tr>
<tr class="memdesc:a80f3fb70e1c88ead16a0f203c9200bea"><td class="mdescLeft">&#160;</td><td class="mdescRight">return the size of the nearest neighbour field <br /></td></tr>
<tr class="separator:a80f3fb70e1c88ead16a0f203c9200bea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72063b924640e58277950a29d1f21098"><td class="memItemLeft" align="right" valign="top"><a id="a72063b924640e58277950a29d1f21098"></a>
std::pair&lt; cv::Rect, cv::Rect &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#a72063b924640e58277950a29d1f21098">getMatchingPatches</a> (const cv::Point &amp;ptA) const</td></tr>
<tr class="memdesc:a72063b924640e58277950a29d1f21098"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the best matching pair of patches (source and destination) for source patch centred at <code>ptA</code>. Points close to the boundary have their size adjusted. <br /></td></tr>
<tr class="separator:a72063b924640e58277950a29d1f21098"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f9686f0620ee13cfbe4eda3015cd004"><td class="memItemLeft" align="right" valign="top"><a id="a3f9686f0620ee13cfbe4eda3015cd004"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#a3f9686f0620ee13cfbe4eda3015cd004">initialize</a> ()</td></tr>
<tr class="memdesc:a3f9686f0620ee13cfbe4eda3015cd004"><td class="mdescLeft">&#160;</td><td class="mdescRight">initialize the matches with default patch size <br /></td></tr>
<tr class="separator:a3f9686f0620ee13cfbe4eda3015cd004"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b0622ff6dd90ffcc7f48791688d1fc0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#a8b0622ff6dd90ffcc7f48791688d1fc0">initialize</a> (const cv::Size &amp;patchRadius)</td></tr>
<tr class="memdesc:a8b0622ff6dd90ffcc7f48791688d1fc0"><td class="mdescLeft">&#160;</td><td class="mdescRight">initialize the matches given patchRadius  <a href="#a8b0622ff6dd90ffcc7f48791688d1fc0">More...</a><br /></td></tr>
<tr class="separator:a8b0622ff6dd90ffcc7f48791688d1fc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6680cae7af06d5e9a4d0c963cad29f8a"><td class="memItemLeft" align="right" valign="top"><a id="a6680cae7af06d5e9a4d0c963cad29f8a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#a6680cae7af06d5e9a4d0c963cad29f8a">initialize</a> (const cv::Mat &amp;<a class="el" href="classdrwnMaskedPatchMatch.html#a4f531ed837de8a90dde327637f306de6">nnf</a>)</td></tr>
<tr class="memdesc:a6680cae7af06d5e9a4d0c963cad29f8a"><td class="mdescLeft">&#160;</td><td class="mdescRight">initialize the matches given nearest neighbour field (patch size is unchanged) <br /></td></tr>
<tr class="separator:a6680cae7af06d5e9a4d0c963cad29f8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6500415ca0801a30ea74e399c629c63"><td class="memItemLeft" align="right" valign="top"><a id="ad6500415ca0801a30ea74e399c629c63"></a>
const cv::Mat &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#ad6500415ca0801a30ea74e399c629c63">search</a> (unsigned maxIterations=1)</td></tr>
<tr class="memdesc:ad6500415ca0801a30ea74e399c629c63"><td class="mdescLeft">&#160;</td><td class="mdescRight">Search for better matches and return updated nearest neighbour field. The nearest neighbour field maps is indexed by the centre pixel of the patch. <br /></td></tr>
<tr class="separator:ad6500415ca0801a30ea74e399c629c63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdfd954cfd4b372cf7375ee10847ece0"><td class="memItemLeft" align="right" valign="top"><a id="abdfd954cfd4b372cf7375ee10847ece0"></a>
const cv::Mat &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#abdfd954cfd4b372cf7375ee10847ece0">search</a> (cv::Rect roiToUpdate, unsigned maxIterations=1)</td></tr>
<tr class="memdesc:abdfd954cfd4b372cf7375ee10847ece0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Search for better matches on subregion of the image and return updated nearest neighbour field. Only regions whose centre pixel appear in <code>roiToUpdate</code> will be changed. <br /></td></tr>
<tr class="separator:abdfd954cfd4b372cf7375ee10847ece0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f531ed837de8a90dde327637f306de6"><td class="memItemLeft" align="right" valign="top"><a id="a4f531ed837de8a90dde327637f306de6"></a>
const cv::Mat &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#a4f531ed837de8a90dde327637f306de6">nnf</a> () const</td></tr>
<tr class="memdesc:a4f531ed837de8a90dde327637f306de6"><td class="mdescLeft">&#160;</td><td class="mdescRight">return the current nearest neighbour field <br /></td></tr>
<tr class="separator:a4f531ed837de8a90dde327637f306de6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa91bdf75ce0ebf5407ba0ad9a7c44046"><td class="memItemLeft" align="right" valign="top"><a id="aa91bdf75ce0ebf5407ba0ad9a7c44046"></a>
const cv::Mat &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#aa91bdf75ce0ebf5407ba0ad9a7c44046">costs</a> () const</td></tr>
<tr class="memdesc:aa91bdf75ce0ebf5407ba0ad9a7c44046"><td class="mdescLeft">&#160;</td><td class="mdescRight">return (matching) costs (CV_32FC1) associated with the current nearest neighbour field <br /></td></tr>
<tr class="separator:aa91bdf75ce0ebf5407ba0ad9a7c44046"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d19ecdb943f8e3f260d1cbf8908aab0"><td class="memItemLeft" align="right" valign="top"><a id="a2d19ecdb943f8e3f260d1cbf8908aab0"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#a2d19ecdb943f8e3f260d1cbf8908aab0">energy</a> () const</td></tr>
<tr class="memdesc:a2d19ecdb943f8e3f260d1cbf8908aab0"><td class="mdescLeft">&#160;</td><td class="mdescRight">return the current match energy <br /></td></tr>
<tr class="separator:a2d19ecdb943f8e3f260d1cbf8908aab0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06b85170062b222b6cb0f6026dc1997f"><td class="memItemLeft" align="right" valign="top"><a id="a06b85170062b222b6cb0f6026dc1997f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#a06b85170062b222b6cb0f6026dc1997f">modifySourceImage</a> (const cv::Rect &amp;roi, const cv::Mat &amp;img, double alpha=0.0)</td></tr>
<tr class="memdesc:a06b85170062b222b6cb0f6026dc1997f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy over a region of the source image and unmask the region copied into. Alpha-blends with the masked area. <br /></td></tr>
<tr class="separator:a06b85170062b222b6cb0f6026dc1997f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1de541060f47d5b3c4a7c57bce77784b"><td class="memItemLeft" align="right" valign="top"><a id="a1de541060f47d5b3c4a7c57bce77784b"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#a1de541060f47d5b3c4a7c57bce77784b">modifySourceImage</a> (const cv::Rect &amp;roiA, const cv::Rect &amp;roiB, double alpha=0.0)</td></tr>
<tr class="memdesc:a1de541060f47d5b3c4a7c57bce77784b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy over a region of the source image from the target image and unmask the region copied into. Alpha-blends with the masked area. <br /></td></tr>
<tr class="separator:a1de541060f47d5b3c4a7c57bce77784b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60e04d87b8fde518a015a11a05755026"><td class="memItemLeft" align="right" valign="top"><a id="a60e04d87b8fde518a015a11a05755026"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#a60e04d87b8fde518a015a11a05755026">modifyTargetImage</a> (const cv::Rect &amp;roi, const cv::Mat &amp;img, double alpha=0.0)</td></tr>
<tr class="memdesc:a60e04d87b8fde518a015a11a05755026"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy over a region of the target image (_imgB) and unmask the region copied into. Alpha-blends with the masked area. <br /></td></tr>
<tr class="separator:a60e04d87b8fde518a015a11a05755026"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b638f299cef24c3becd424f7ab124f4"><td class="memItemLeft" align="right" valign="top"><a id="a9b638f299cef24c3becd424f7ab124f4"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#a9b638f299cef24c3becd424f7ab124f4">modifyTargetImage</a> (const cv::Rect &amp;roiA, const cv::Rect &amp;roiB, double alpha=0.0)</td></tr>
<tr class="memdesc:a9b638f299cef24c3becd424f7ab124f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy over a region of the target image (_imgB) from itself and unmask the region copied into. Alpha-blends with the masked area. <br /></td></tr>
<tr class="separator:a9b638f299cef24c3becd424f7ab124f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4a1933dbae378a1edb441679ea4c4b6"><td class="memItemLeft" align="right" valign="top"><a id="ab4a1933dbae378a1edb441679ea4c4b6"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#ab4a1933dbae378a1edb441679ea4c4b6">expandTargetMask</a> (unsigned radius=1)</td></tr>
<tr class="memdesc:ab4a1933dbae378a1edb441679ea4c4b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Expand the target mask (_maskB) by dilating pixels around the boundary with the unmasked region. The expansion kernel is a rectangle of size 2 * <code>radius</code> + 1. <br /></td></tr>
<tr class="separator:ab4a1933dbae378a1edb441679ea4c4b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ed9a668b0e7bb14ba97ff9c08854a22"><td class="memItemLeft" align="right" valign="top">cv::Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#a9ed9a668b0e7bb14ba97ff9c08854a22">visualize</a> () const</td></tr>
<tr class="memdesc:a9ed9a668b0e7bb14ba97ff9c08854a22"><td class="mdescLeft">&#160;</td><td class="mdescRight">visualize the nearest neighbour field  <a href="#a9ed9a668b0e7bb14ba97ff9c08854a22">More...</a><br /></td></tr>
<tr class="separator:a9ed9a668b0e7bb14ba97ff9c08854a22"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a5f99c78c37bca3ff8f353995ef0187a6"><td class="memItemLeft" align="right" valign="top"><a id="a5f99c78c37bca3ff8f353995ef0187a6"></a>
static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#a5f99c78c37bca3ff8f353995ef0187a6">TRY_IDENTITY_INIT</a> = true</td></tr>
<tr class="memdesc:a5f99c78c37bca3ff8f353995ef0187a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">attempt identity match during initialization (default: true) <br /></td></tr>
<tr class="separator:a5f99c78c37bca3ff8f353995ef0187a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab12b9c7a1c3488d07b5e1c7270012f77"><td class="memItemLeft" align="right" valign="top"><a id="ab12b9c7a1c3488d07b5e1c7270012f77"></a>
static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#ab12b9c7a1c3488d07b5e1c7270012f77">DISTANCE_MEASURE</a> = cv::NORM_L1</td></tr>
<tr class="memdesc:ab12b9c7a1c3488d07b5e1c7270012f77"><td class="mdescLeft">&#160;</td><td class="mdescRight">norm type for comparing patches (cv::NORM_L1 or cv::NORM_L2) <br /></td></tr>
<tr class="separator:ab12b9c7a1c3488d07b5e1c7270012f77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2e167cb42b08ca62d35a276ab895421"><td class="memItemLeft" align="right" valign="top"><a id="ad2e167cb42b08ca62d35a276ab895421"></a>
static float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#ad2e167cb42b08ca62d35a276ab895421">HEIGHT_PENALTY</a> = 32.0f</td></tr>
<tr class="memdesc:ad2e167cb42b08ca62d35a276ab895421"><td class="mdescLeft">&#160;</td><td class="mdescRight">bias term added for row/height difference <br /></td></tr>
<tr class="separator:ad2e167cb42b08ca62d35a276ab895421"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a07f2ecacd03ab9838aab6c9229235aa1"><td class="memItemLeft" align="right" valign="top"><a id="a07f2ecacd03ab9838aab6c9229235aa1"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#a07f2ecacd03ab9838aab6c9229235aa1">update</a> (const cv::Point &amp;ptA, const cv::Point &amp;ptB)</td></tr>
<tr class="memdesc:a07f2ecacd03ab9838aab6c9229235aa1"><td class="mdescLeft">&#160;</td><td class="mdescRight">attempt and update a match candidate <br /></td></tr>
<tr class="separator:a07f2ecacd03ab9838aab6c9229235aa1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78e82d8666717198e3399acdefeb9bae"><td class="memItemLeft" align="right" valign="top"><a id="a78e82d8666717198e3399acdefeb9bae"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#a78e82d8666717198e3399acdefeb9bae">score</a> (const cv::Point &amp;ptA, const cv::Point &amp;ptB) const</td></tr>
<tr class="memdesc:a78e82d8666717198e3399acdefeb9bae"><td class="mdescLeft">&#160;</td><td class="mdescRight">scores a match <br /></td></tr>
<tr class="separator:a78e82d8666717198e3399acdefeb9bae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a157891ca78f3bacbd1c4d275af4a234e"><td class="memItemLeft" align="right" valign="top"><a id="a157891ca78f3bacbd1c4d275af4a234e"></a>
cv::Rect&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#a157891ca78f3bacbd1c4d275af4a234e">affectedRegion</a> (const cv::Rect &amp;modified) const</td></tr>
<tr class="memdesc:a157891ca78f3bacbd1c4d275af4a234e"><td class="mdescLeft">&#160;</td><td class="mdescRight">calculate nnf pixels affected by a mask or image modification <br /></td></tr>
<tr class="separator:a157891ca78f3bacbd1c4d275af4a234e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6eff952b83d63a521459dbc78ed5c7b0"><td class="memItemLeft" align="right" valign="top"><a id="a6eff952b83d63a521459dbc78ed5c7b0"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#a6eff952b83d63a521459dbc78ed5c7b0">rescore</a> ()</td></tr>
<tr class="memdesc:a6eff952b83d63a521459dbc78ed5c7b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">update scores on whole image <br /></td></tr>
<tr class="separator:a6eff952b83d63a521459dbc78ed5c7b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bb3e53148f64c975885ba898290dff1"><td class="memItemLeft" align="right" valign="top"><a id="a0bb3e53148f64c975885ba898290dff1"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#a0bb3e53148f64c975885ba898290dff1">rescore</a> (const cv::Rect &amp;roi)</td></tr>
<tr class="memdesc:a0bb3e53148f64c975885ba898290dff1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update scores on given region. All affected scores are updated, that is, any score that was calculated from a patch that overlaps with <code>roi</code>. <br /></td></tr>
<tr class="separator:a0bb3e53148f64c975885ba898290dff1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4abee90e99d06655bc55826e2204a335"><td class="memItemLeft" align="right" valign="top"><a id="a4abee90e99d06655bc55826e2204a335"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#a4abee90e99d06655bc55826e2204a335">cacheValidPixels</a> ()</td></tr>
<tr class="memdesc:a4abee90e99d06655bc55826e2204a335"><td class="mdescLeft">&#160;</td><td class="mdescRight">compute valid pixels <br /></td></tr>
<tr class="separator:a4abee90e99d06655bc55826e2204a335"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6764e8a2e525b58c71bb0cbbe95a0db"><td class="memItemLeft" align="right" valign="top"><a id="af6764e8a2e525b58c71bb0cbbe95a0db"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#af6764e8a2e525b58c71bb0cbbe95a0db">updateValidPixels</a> (const cv::Rect &amp;roi)</td></tr>
<tr class="memdesc:af6764e8a2e525b58c71bb0cbbe95a0db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the validity of pixels that occur because of a change to the source mask on a given region (i.e., any pixel whose corresponding patch overlaps with the region). <br /></td></tr>
<tr class="separator:af6764e8a2e525b58c71bb0cbbe95a0db"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a1d64738a584f547b620696c423e4d7c9"><td class="memItemLeft" align="right" valign="top"><a id="a1d64738a584f547b620696c423e4d7c9"></a>
cv::Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#a1d64738a584f547b620696c423e4d7c9">_imgA</a></td></tr>
<tr class="memdesc:a1d64738a584f547b620696c423e4d7c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">CV_8U multi-channel image (source) <br /></td></tr>
<tr class="separator:a1d64738a584f547b620696c423e4d7c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f8570aef0752b9fab91f21652693733"><td class="memItemLeft" align="right" valign="top"><a id="a2f8570aef0752b9fab91f21652693733"></a>
cv::Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#a2f8570aef0752b9fab91f21652693733">_imgB</a></td></tr>
<tr class="memdesc:a2f8570aef0752b9fab91f21652693733"><td class="mdescLeft">&#160;</td><td class="mdescRight">CV_8U multi-channel image (target) <br /></td></tr>
<tr class="separator:a2f8570aef0752b9fab91f21652693733"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f914405d8087e0670b0d817cef13b7d"><td class="memItemLeft" align="right" valign="top"><a id="a4f914405d8087e0670b0d817cef13b7d"></a>
cv::Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#a4f914405d8087e0670b0d817cef13b7d">_maskA</a></td></tr>
<tr class="memdesc:a4f914405d8087e0670b0d817cef13b7d"><td class="mdescLeft">&#160;</td><td class="mdescRight">CV_8UC1 mask for valid source pixels. <br /></td></tr>
<tr class="separator:a4f914405d8087e0670b0d817cef13b7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96f63efb42caade7480307a32c201e91"><td class="memItemLeft" align="right" valign="top"><a id="a96f63efb42caade7480307a32c201e91"></a>
cv::Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#a96f63efb42caade7480307a32c201e91">_maskB</a></td></tr>
<tr class="memdesc:a96f63efb42caade7480307a32c201e91"><td class="mdescLeft">&#160;</td><td class="mdescRight">CV_8UC1 mask for valid target pixels. <br /></td></tr>
<tr class="separator:a96f63efb42caade7480307a32c201e91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49a985f1d45fdc60114d46d964422072"><td class="memItemLeft" align="right" valign="top"><a id="a49a985f1d45fdc60114d46d964422072"></a>
cv::Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#a49a985f1d45fdc60114d46d964422072">_invmaskA</a></td></tr>
<tr class="memdesc:a49a985f1d45fdc60114d46d964422072"><td class="mdescLeft">&#160;</td><td class="mdescRight">CV_8UC1 inverse of _maskA. <br /></td></tr>
<tr class="separator:a49a985f1d45fdc60114d46d964422072"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1ca9bf54541c4b16744a607b6e767ef"><td class="memItemLeft" align="right" valign="top"><a id="ad1ca9bf54541c4b16744a607b6e767ef"></a>
cv::Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#ad1ca9bf54541c4b16744a607b6e767ef">_invmaskB</a></td></tr>
<tr class="memdesc:ad1ca9bf54541c4b16744a607b6e767ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">CV_8UC1 inverse of _maskB. <br /></td></tr>
<tr class="separator:ad1ca9bf54541c4b16744a607b6e767ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44c0b92ad153dbdf9fe35797e57f5de3"><td class="memItemLeft" align="right" valign="top"><a id="a44c0b92ad153dbdf9fe35797e57f5de3"></a>
cv::Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#a44c0b92ad153dbdf9fe35797e57f5de3">_overlapA</a></td></tr>
<tr class="memdesc:a44c0b92ad153dbdf9fe35797e57f5de3"><td class="mdescLeft">&#160;</td><td class="mdescRight">pixels in _imgA whose patch overlaps with _invmaskA <br /></td></tr>
<tr class="separator:a44c0b92ad153dbdf9fe35797e57f5de3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac965e78ef980c03107ff32b845777d60"><td class="memItemLeft" align="right" valign="top"><a id="ac965e78ef980c03107ff32b845777d60"></a>
cv::Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#ac965e78ef980c03107ff32b845777d60">_validB</a></td></tr>
<tr class="memdesc:ac965e78ef980c03107ff32b845777d60"><td class="mdescLeft">&#160;</td><td class="mdescRight">pixels in _imgB whose patch doesn't overlap with _maskB <br /></td></tr>
<tr class="separator:ac965e78ef980c03107ff32b845777d60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46f2598f6e44b08b271f7cf3cff0648e"><td class="memItemLeft" align="right" valign="top"><a id="a46f2598f6e44b08b271f7cf3cff0648e"></a>
cv::Size&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#a46f2598f6e44b08b271f7cf3cff0648e">_patchRadius</a></td></tr>
<tr class="memdesc:a46f2598f6e44b08b271f7cf3cff0648e"><td class="mdescLeft">&#160;</td><td class="mdescRight">size of patch is 2 * _patchRadius + 1 <br /></td></tr>
<tr class="separator:a46f2598f6e44b08b271f7cf3cff0648e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0de0dcd1a53767f4675dc5624859f8a1"><td class="memItemLeft" align="right" valign="top"><a id="a0de0dcd1a53767f4675dc5624859f8a1"></a>
cv::Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#a0de0dcd1a53767f4675dc5624859f8a1">_nnfA</a></td></tr>
<tr class="memdesc:a0de0dcd1a53767f4675dc5624859f8a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">CV_16S2 nearest neighbour field (size _imgA) <br /></td></tr>
<tr class="separator:a0de0dcd1a53767f4675dc5624859f8a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a543b4d96845f471d33ace3b6cfe869f0"><td class="memItemLeft" align="right" valign="top"><a id="a543b4d96845f471d33ace3b6cfe869f0"></a>
cv::Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#a543b4d96845f471d33ace3b6cfe869f0">_costsA</a></td></tr>
<tr class="memdesc:a543b4d96845f471d33ace3b6cfe869f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">CV_32FC1 field of match costs (same size as _nnfA) <br /></td></tr>
<tr class="separator:a543b4d96845f471d33ace3b6cfe869f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6f376f11a4e01d964c506add2e81183"><td class="memItemLeft" align="right" valign="top"><a id="aa6f376f11a4e01d964c506add2e81183"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#aa6f376f11a4e01d964c506add2e81183">_iterationCount</a></td></tr>
<tr class="memdesc:aa6f376f11a4e01d964c506add2e81183"><td class="mdescLeft">&#160;</td><td class="mdescRight">total number of iterations since initialization <br /></td></tr>
<tr class="separator:aa6f376f11a4e01d964c506add2e81183"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6986be254e4d64971f59ed1a0e289b3c"><td class="memItemLeft" align="right" valign="top"><a id="a6986be254e4d64971f59ed1a0e289b3c"></a>
cv::Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnMaskedPatchMatch.html#a6986be254e4d64971f59ed1a0e289b3c">_lastChanged</a></td></tr>
<tr class="memdesc:a6986be254e4d64971f59ed1a0e289b3c"><td class="mdescLeft">&#160;</td><td class="mdescRight">last iteration that given patch was changed <br /></td></tr>
<tr class="separator:a6986be254e4d64971f59ed1a0e289b3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implements the basic PatchMatch algorithm of Barnes et al., SIGGRAPH 2009 on masked images. </p>
<p>The source and target images can have different sizes but must both be CV_8U and have the same number of channels (features). The source image/feautures and mask can be adjusted between calls to <code><a class="el" href="classdrwnMaskedPatchMatch.html#ad6500415ca0801a30ea74e399c629c63" title="Search for better matches and return updated nearest neighbour field. The nearest neighbour field map...">search()</a></code>. Masked regions in the source image are ignored. Matching to masked regions in the target image has infinite cost.</p>
<p>Each pixel in the returned nearest neighbour field represents the offset to the optimal match for a patch of size 2 * <code>patchRadius</code> + 1 and centred on that pixel. Use the <code><a class="el" href="classdrwnMaskedPatchMatch.html#a72063b924640e58277950a29d1f21098" title="Return the best matching pair of patches (source and destination) for source patch centred at ptA...">getMatchingPatches()</a></code> to get matching regions with size adjusted for pixels within <code>patchRadius</code> pixel of the boundary.</p>
<div class="fragment"><div class="line">cv::Mat imgA;</div><div class="line">cv::Mat imgB;</div><div class="line">cv::Size patchRadius;</div><div class="line"></div><div class="line">...</div><div class="line"></div><div class="line">drwnMaskedPatchMatch pm(imgA, imgB, patchRadius);</div><div class="line">pm.search(10);</div><div class="line">Vec2s p = pm.nnf().at&lt;Vec2s&gt;(y, x);</div><div class="line">cv::Rect rA(x - patchRadius.width, y - patchRadius.height, 2 * patchRadius.width + 1, 2 * patchRadius.height + 1);</div><div class="line">cv::Rect rB(p[0] - patchRadius.width, p[1] - patchRadius.height, 2 * patchRadius.width + 1, 2 * patchRadius.height + 1);</div><div class="line">cout &lt;&lt; rA &lt;&lt; <span class="stringliteral">&quot; in imageA matches &quot;</span> &lt;&lt; rB &lt;&lt; <span class="stringliteral">&quot; in imageB\n&quot;</span>;</div></div><!-- fragment --><p>Alternatively you can use the <code><a class="el" href="classdrwnMaskedPatchMatch.html#a72063b924640e58277950a29d1f21098" title="Return the best matching pair of patches (source and destination) for source patch centred at ptA...">getMatchingPatches()</a></code> function, as in:</p>
<div class="fragment"><div class="line">pair&lt;cv::Rect, cv::Rect&gt; r = pm.getMatchingPatches(cv::Point(x, y));</div><div class="line">cout &lt;&lt; r.first &lt;&lt; <span class="stringliteral">&quot; in imageA matches &quot;</span> &lt;&lt; r.second &lt;&lt; <span class="stringliteral">&quot; in imageB\n&quot;</span>;</div></div><!-- fragment --><dl class="section see"><dt>See also</dt><dd>drwnInPaint </dd></dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a8b0622ff6dd90ffcc7f48791688d1fc0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b0622ff6dd90ffcc7f48791688d1fc0">&#9670;&nbsp;</a></span>initialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void drwnMaskedPatchMatch::initialize </td>
          <td>(</td>
          <td class="paramtype">const cv::Size &amp;&#160;</td>
          <td class="paramname"><em>patchRadius</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>initialize the matches given patchRadius </p>
<p>only attempt valid B </p>

</div>
</div>
<a id="a9ed9a668b0e7bb14ba97ff9c08854a22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ed9a668b0e7bb14ba97ff9c08854a22">&#9670;&nbsp;</a></span>visualize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cv::Mat drwnMaskedPatchMatch::visualize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>visualize the nearest neighbour field </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000031">Todo:</a></b></dt><dd>Add modifySourceImage and modifyTargetImage functions based on a mask </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="drwnMaskedPatchMatch_8h_source.html">drwnMaskedPatchMatch.h</a></li>
<li>drwnMaskedPatchMatch.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed May 7 2025 09:52:24 for Darwin by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
