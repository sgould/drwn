<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Darwin: drwnImageInPainter Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="drwn.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Darwin
   &#160;<span id="projectnumber">1.10(beta)</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a> &#124;
<a href="classdrwnImageInPainter-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">drwnImageInPainter Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Performs exemplar-based image inpainting.  
 <a href="classdrwnImageInPainter.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a4a2744e02cf2d6b6f5c88a45f6042db6"><td class="memItemLeft" align="right" valign="top"><a id="a4a2744e02cf2d6b6f5c88a45f6042db6"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageInPainter.html#a4a2744e02cf2d6b6f5c88a45f6042db6">drwnImageInPainter</a> (unsigned _patchRadius=<a class="el" href="classdrwnImageInPainter.html#a1691e783cffdef9a7d9518b1a2021d31">DEFAULT_RADIUS</a>, bool _bAllowFromFilled=false)</td></tr>
<tr class="memdesc:a4a2744e02cf2d6b6f5c88a45f6042db6"><td class="mdescLeft">&#160;</td><td class="mdescRight">construct an image inpainter object <br /></td></tr>
<tr class="separator:a4a2744e02cf2d6b6f5c88a45f6042db6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39eb7bef45e65cbf5e57c35ce82c42f0"><td class="memItemLeft" align="right" valign="top"><a id="a39eb7bef45e65cbf5e57c35ce82c42f0"></a>
virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageInPainter.html#a39eb7bef45e65cbf5e57c35ce82c42f0">~drwnImageInPainter</a> ()</td></tr>
<tr class="memdesc:a39eb7bef45e65cbf5e57c35ce82c42f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">destructor <br /></td></tr>
<tr class="separator:a39eb7bef45e65cbf5e57c35ce82c42f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4709766dd65c20cc413f9ee31dd3f98d"><td class="memItemLeft" align="right" valign="top"><a id="a4709766dd65c20cc413f9ee31dd3f98d"></a>
cv::Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageInPainter.html#a4709766dd65c20cc413f9ee31dd3f98d">fill</a> (const cv::Mat &amp;image, const cv::Mat &amp;fillMask) const</td></tr>
<tr class="memdesc:a4709766dd65c20cc413f9ee31dd3f98d"><td class="mdescLeft">&#160;</td><td class="mdescRight">inpaint the pixels within <code>fillMask</code> <br /></td></tr>
<tr class="separator:a4709766dd65c20cc413f9ee31dd3f98d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0700c6c413a10ac9f5dbcd52197df54b"><td class="memItemLeft" align="right" valign="top"><a id="a0700c6c413a10ac9f5dbcd52197df54b"></a>
cv::Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageInPainter.html#a0700c6c413a10ac9f5dbcd52197df54b">fill</a> (const cv::Mat &amp;image, const cv::Mat &amp;fillMask, const cv::Mat &amp;copyMask) const</td></tr>
<tr class="memdesc:a0700c6c413a10ac9f5dbcd52197df54b"><td class="mdescLeft">&#160;</td><td class="mdescRight">inpaint the pixels within <code>fillMask</code> using only pixels from <code>copyMask</code> <br /></td></tr>
<tr class="separator:a0700c6c413a10ac9f5dbcd52197df54b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f185cb9427e5b73df6889229b88393a"><td class="memItemLeft" align="right" valign="top"><a id="a7f185cb9427e5b73df6889229b88393a"></a>
cv::Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageInPainter.html#a7f185cb9427e5b73df6889229b88393a">fill</a> (const cv::Mat &amp;image, const cv::Mat &amp;fillMask, const cv::Mat &amp;copyMask, const cv::Mat &amp;ignoreMask) const</td></tr>
<tr class="memdesc:a7f185cb9427e5b73df6889229b88393a"><td class="mdescLeft">&#160;</td><td class="mdescRight">inpaint the pixels within <code>fillMask</code> using only pixels from <code>copyMask</code> and ignoring matching against pixels in <code>ignoreMask</code> <br /></td></tr>
<tr class="separator:a7f185cb9427e5b73df6889229b88393a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf28a0bade82b59164b9afb3104fca1f"><td class="memItemLeft" align="right" valign="top"><a id="abf28a0bade82b59164b9afb3104fca1f"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageInPainter.html#abf28a0bade82b59164b9afb3104fca1f">monitor</a> (const cv::Mat &amp;image, const cv::Mat &amp;mask) const</td></tr>
<tr class="memdesc:abf28a0bade82b59164b9afb3104fca1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">monitor function called each iteration (can be used to show progress) <br /></td></tr>
<tr class="separator:abf28a0bade82b59164b9afb3104fca1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:ab74b5a61885eeae0f80dbe9ce4b8b0a7"><td class="memItemLeft" align="right" valign="top"><a id="ab74b5a61885eeae0f80dbe9ce4b8b0a7"></a>
unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageInPainter.html#ab74b5a61885eeae0f80dbe9ce4b8b0a7">patchRadius</a></td></tr>
<tr class="memdesc:ab74b5a61885eeae0f80dbe9ce4b8b0a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">size of the patch (2 * radius + 1) for comparison <br /></td></tr>
<tr class="separator:ab74b5a61885eeae0f80dbe9ce4b8b0a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2561dc8e303c26a4353d1076de63a571"><td class="memItemLeft" align="right" valign="top"><a id="a2561dc8e303c26a4353d1076de63a571"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageInPainter.html#a2561dc8e303c26a4353d1076de63a571">bAllowFromFilled</a></td></tr>
<tr class="memdesc:a2561dc8e303c26a4353d1076de63a571"><td class="mdescLeft">&#160;</td><td class="mdescRight">allow copying from already infilled regions <br /></td></tr>
<tr class="separator:a2561dc8e303c26a4353d1076de63a571"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6356a1f8df82877d65b97d48a37dc2be"><td class="memItemLeft" align="right" valign="top"><a id="a6356a1f8df82877d65b97d48a37dc2be"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageInPainter.html#a6356a1f8df82877d65b97d48a37dc2be">alphaBlend</a></td></tr>
<tr class="memdesc:a6356a1f8df82877d65b97d48a37dc2be"><td class="mdescLeft">&#160;</td><td class="mdescRight">alpha-blend with un-masked region <br /></td></tr>
<tr class="separator:a6356a1f8df82877d65b97d48a37dc2be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab038c18350c810746be2fc3626f1eb69"><td class="memItemLeft" align="right" valign="top"><a id="ab038c18350c810746be2fc3626f1eb69"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageInPainter.html#ab038c18350c810746be2fc3626f1eb69">bVisualize</a></td></tr>
<tr class="memdesc:ab038c18350c810746be2fc3626f1eb69"><td class="mdescLeft">&#160;</td><td class="mdescRight">show progress using the monitor function <br /></td></tr>
<tr class="separator:ab038c18350c810746be2fc3626f1eb69"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a1691e783cffdef9a7d9518b1a2021d31"><td class="memItemLeft" align="right" valign="top"><a id="a1691e783cffdef9a7d9518b1a2021d31"></a>
static unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageInPainter.html#a1691e783cffdef9a7d9518b1a2021d31">DEFAULT_RADIUS</a> = 3</td></tr>
<tr class="memdesc:a1691e783cffdef9a7d9518b1a2021d31"><td class="mdescLeft">&#160;</td><td class="mdescRight">default patch radius <br /></td></tr>
<tr class="separator:a1691e783cffdef9a7d9518b1a2021d31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7166036dac9cd431fe130d4d0ff6528"><td class="memItemLeft" align="right" valign="top"><a id="aa7166036dac9cd431fe130d4d0ff6528"></a>
static unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageInPainter.html#aa7166036dac9cd431fe130d4d0ff6528">UPDATE_STEPS</a> = 10</td></tr>
<tr class="memdesc:aa7166036dac9cd431fe130d4d0ff6528"><td class="mdescLeft">&#160;</td><td class="mdescRight">patch match update steps between inpaints <br /></td></tr>
<tr class="separator:aa7166036dac9cd431fe130d4d0ff6528"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf4366af9f1d63035d38f7aac41c932e"><td class="memItemLeft" align="right" valign="top"><a id="acf4366af9f1d63035d38f7aac41c932e"></a>
static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageInPainter.html#acf4366af9f1d63035d38f7aac41c932e">PIXELWISE</a> = false</td></tr>
<tr class="memdesc:acf4366af9f1d63035d38f7aac41c932e"><td class="mdescLeft">&#160;</td><td class="mdescRight">pixelwise update versus patch update <br /></td></tr>
<tr class="separator:acf4366af9f1d63035d38f7aac41c932e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a741c7a5a24b7177bee9eb725809c6db7"><td class="memItemLeft" align="right" valign="top"><a id="a741c7a5a24b7177bee9eb725809c6db7"></a>
static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageInPainter.html#a741c7a5a24b7177bee9eb725809c6db7">PRIORITY_FILLING</a> = false</td></tr>
<tr class="memdesc:a741c7a5a24b7177bee9eb725809c6db7"><td class="mdescLeft">&#160;</td><td class="mdescRight">use priority filling scheme versus onion peeling <br /></td></tr>
<tr class="separator:a741c7a5a24b7177bee9eb725809c6db7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a4a13dba9f0a6c957d3d6d8c42b98ebf5"><td class="memItemLeft" align="right" valign="top"><a id="a4a13dba9f0a6c957d3d6d8c42b98ebf5"></a>
virtual cv::Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageInPainter.html#a4a13dba9f0a6c957d3d6d8c42b98ebf5">featurizeImage</a> (const cv::Mat &amp;image) const</td></tr>
<tr class="memdesc:a4a13dba9f0a6c957d3d6d8c42b98ebf5"><td class="mdescLeft">&#160;</td><td class="mdescRight">compute pixelwise features for matching <br /></td></tr>
<tr class="separator:a4a13dba9f0a6c957d3d6d8c42b98ebf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7802e056654f42059734ca9e6d2f5ff"><td class="memItemLeft" align="right" valign="top"><a id="ad7802e056654f42059734ca9e6d2f5ff"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageInPainter.html#ad7802e056654f42059734ca9e6d2f5ff">computePixelPriority</a> (const cv::Point &amp;p, const cv::Mat &amp;image, const cv::Mat &amp;mask) const</td></tr>
<tr class="memdesc:ad7802e056654f42059734ca9e6d2f5ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">compute pixel priority <br /></td></tr>
<tr class="separator:ad7802e056654f42059734ca9e6d2f5ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr class="memitem:a9d71c5cf412ae75a2cb55cc94336e403"><td class="memItemLeft" align="right" valign="top"><a id="a9d71c5cf412ae75a2cb55cc94336e403"></a>
static cv::Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageInPainter.html#a9d71c5cf412ae75a2cb55cc94336e403">extractMaskBoundary</a> (const cv::Mat &amp;mask)</td></tr>
<tr class="memdesc:a9d71c5cf412ae75a2cb55cc94336e403"><td class="mdescLeft">&#160;</td><td class="mdescRight">extract pixels within the mask adjacent to the boundary <br /></td></tr>
<tr class="separator:a9d71c5cf412ae75a2cb55cc94336e403"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f377b05ffa85742c24d1a3f9de0c02f"><td class="memItemLeft" align="right" valign="top"><a id="a2f377b05ffa85742c24d1a3f9de0c02f"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrwnImageInPainter.html#a2f377b05ffa85742c24d1a3f9de0c02f">blendMaskedImage</a> (cv::Mat img, const cv::Mat &amp;src, const cv::Mat &amp;mask, double alpha)</td></tr>
<tr class="memdesc:a2f377b05ffa85742c24d1a3f9de0c02f"><td class="mdescLeft">&#160;</td><td class="mdescRight">alpha-blend images on masked area <br /></td></tr>
<tr class="separator:a2f377b05ffa85742c24d1a3f9de0c02f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Performs exemplar-based image inpainting. </p>
<p>Completes a masked part of an image with patches copied from other regions in the image. Motivated by the image completion algorithm of Criminisi et al., IEEE TIP, 2004 using the PatchMatch algorithm of Barnes et al. for finding patch candidates. An example code snippet is provided below:</p>
<div class="fragment"><div class="line">cv::Mat img = cv::imread(imageFilename, CV_LOAD_IMAGE_COLOR);</div><div class="line">DRWN_ASSERT_MSG(img.data, <span class="stringliteral">&quot;could not read image from &quot;</span> &lt;&lt; imageFilename);</div><div class="line"> </div><div class="line">cv::Mat mask = cv::Mat::zeros(img.rows, img.cols, CV_8UC1);</div><div class="line">cv::rectangle(mask, cv::Point(img.cols / 4, img.rows / 4),</div><div class="line">    cv::Point(3 * img.cols / 4, 3 * img.rows / 4), cv::Scalar(0xff), -1);</div><div class="line"></div><div class="line"><a class="code" href="classdrwnImageInPainter.html">drwnImageInPainter</a> inpainter(3);</div><div class="line">inpainter.bVisualize = <span class="keyword">true</span>;</div><div class="line">cv::Mat output = inpainter.fill(img, mask);</div><div class="line"></div><div class="line">cv::imwrite(outputFilename, output);</div></div><!-- fragment --> </div><hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="drwnImageInPainter_8h_source.html">drwnImageInPainter.h</a></li>
<li>drwnImageInPainter.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed May 7 2025 09:52:24 for Darwin by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
